<!DOCTYPE html PUBLIC ""
    "">
<html><head><meta charset="UTF-8" /><link href="css/default.css" rel="stylesheet" type="text/css" /><script src="js/jquery.min.js" type="text/javascript"></script><script src="js/page_effects.js" type="text/javascript"></script><title>io.pedestal.log documentation</title></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html"><span class="project-title"><span class="project-name">Pedestal.log</span> <span class="project-version">0.5.7</span></span></a></h1></div><div class="sidebar primary"><h3 class="no-link"><span class="inner">Project</span></h3><ul class="index-link"><li class="depth-1 "><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1 current"><a href="io.pedestal.log.html"><div class="inner"><span>io.pedestal.log</span></div></a></li></ul></div><div class="sidebar secondary"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="io.pedestal.log.html#var-*mdc-context*"><div class="inner"><span>*mdc-context*</span></div></a></li><li class="depth-1"><a href="io.pedestal.log.html#var-active-span"><div class="inner"><span>active-span</span></div></a></li><li class="depth-1"><a href="io.pedestal.log.html#var-add-span-baggage.21"><div class="inner"><span>add-span-baggage!</span></div></a></li><li class="depth-1"><a href="io.pedestal.log.html#var-counter"><div class="inner"><span>counter</span></div></a></li><li class="depth-1"><a href="io.pedestal.log.html#var-debug"><div class="inner"><span>debug</span></div></a></li><li class="depth-1"><a href="io.pedestal.log.html#var-default-recorder"><div class="inner"><span>default-recorder</span></div></a></li><li class="depth-1"><a href="io.pedestal.log.html#var-default-tracer"><div class="inner"><span>default-tracer</span></div></a></li><li class="depth-1"><a href="io.pedestal.log.html#var-error"><div class="inner"><span>error</span></div></a></li><li class="depth-1"><a href="io.pedestal.log.html#var-finish-span"><div class="inner"><span>finish-span</span></div></a></li><li class="depth-1"><a href="io.pedestal.log.html#var-format-name"><div class="inner"><span>format-name</span></div></a></li><li class="depth-1"><a href="io.pedestal.log.html#var-gauge"><div class="inner"><span>gauge</span></div></a></li><li class="depth-1"><a href="io.pedestal.log.html#var-histogram"><div class="inner"><span>histogram</span></div></a></li><li class="depth-1"><a href="io.pedestal.log.html#var-info"><div class="inner"><span>info</span></div></a></li><li class="depth-1"><a href="io.pedestal.log.html#var-jmx-reporter"><div class="inner"><span>jmx-reporter</span></div></a></li><li class="depth-1"><a href="io.pedestal.log.html#var-log"><div class="inner"><span>log</span></div></a></li><li class="depth-1"><a href="io.pedestal.log.html#var-log-level-dispatch"><div class="inner"><span>log-level-dispatch</span></div></a></li><li class="depth-1"><a href="io.pedestal.log.html#var-log-reporter"><div class="inner"><span>log-reporter</span></div></a></li><li class="depth-1"><a href="io.pedestal.log.html#var-log-span"><div class="inner"><span>log-span</span></div></a></li><li class="depth-1"><a href="io.pedestal.log.html#var-LoggerSource"><div class="inner"><span>LoggerSource</span></div></a></li><li class="depth-2 branch"><a href="io.pedestal.log.html#var--debug"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>-debug</span></div></a></li><li class="depth-2 branch"><a href="io.pedestal.log.html#var--error"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>-error</span></div></a></li><li class="depth-2 branch"><a href="io.pedestal.log.html#var--info"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>-info</span></div></a></li><li class="depth-2 branch"><a href="io.pedestal.log.html#var--level-enabled.3F"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>-level-enabled?</span></div></a></li><li class="depth-2 branch"><a href="io.pedestal.log.html#var--trace"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>-trace</span></div></a></li><li class="depth-2"><a href="io.pedestal.log.html#var--warn"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>-warn</span></div></a></li><li class="depth-1"><a href="io.pedestal.log.html#var-LoggingMDC"><div class="inner"><span>LoggingMDC</span></div></a></li><li class="depth-2 branch"><a href="io.pedestal.log.html#var--clear-mdc"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>-clear-mdc</span></div></a></li><li class="depth-2 branch"><a href="io.pedestal.log.html#var--get-mdc"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>-get-mdc</span></div></a></li><li class="depth-2 branch"><a href="io.pedestal.log.html#var--put-mdc"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>-put-mdc</span></div></a></li><li class="depth-2 branch"><a href="io.pedestal.log.html#var--remove-mdc"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>-remove-mdc</span></div></a></li><li class="depth-2"><a href="io.pedestal.log.html#var--set-mdc"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>-set-mdc</span></div></a></li><li class="depth-1"><a href="io.pedestal.log.html#var-maybe-init-java-util-log"><div class="inner"><span>maybe-init-java-util-log</span></div></a></li><li class="depth-1"><a href="io.pedestal.log.html#var-mdc-context-key"><div class="inner"><span>mdc-context-key</span></div></a></li><li class="depth-1"><a href="io.pedestal.log.html#var-meter"><div class="inner"><span>meter</span></div></a></li><li class="depth-1"><a href="io.pedestal.log.html#var-metric-registry"><div class="inner"><span>metric-registry</span></div></a></li><li class="depth-1"><a href="io.pedestal.log.html#var-MetricRecorder"><div class="inner"><span>MetricRecorder</span></div></a></li><li class="depth-2 branch"><a href="io.pedestal.log.html#var--counter"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>-counter</span></div></a></li><li class="depth-2 branch"><a href="io.pedestal.log.html#var--gauge"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>-gauge</span></div></a></li><li class="depth-2 branch"><a href="io.pedestal.log.html#var--histogram"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>-histogram</span></div></a></li><li class="depth-2"><a href="io.pedestal.log.html#var--meter"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>-meter</span></div></a></li><li class="depth-1"><a href="io.pedestal.log.html#var-override-logger"><div class="inner"><span>override-logger</span></div></a></li><li class="depth-1"><a href="io.pedestal.log.html#var-span"><div class="inner"><span>span</span></div></a></li><li class="depth-1"><a href="io.pedestal.log.html#var-span-baggage"><div class="inner"><span>span-baggage</span></div></a></li><li class="depth-1"><a href="io.pedestal.log.html#var-span-log-error-kind"><div class="inner"><span>span-log-error-kind</span></div></a></li><li class="depth-1"><a href="io.pedestal.log.html#var-span-log-error-obj"><div class="inner"><span>span-log-error-obj</span></div></a></li><li class="depth-1"><a href="io.pedestal.log.html#var-span-log-event"><div class="inner"><span>span-log-event</span></div></a></li><li class="depth-1"><a href="io.pedestal.log.html#var-span-log-msg"><div class="inner"><span>span-log-msg</span></div></a></li><li class="depth-1"><a href="io.pedestal.log.html#var-span-log-stack"><div class="inner"><span>span-log-stack</span></div></a></li><li class="depth-1"><a href="io.pedestal.log.html#var-spy"><div class="inner"><span>spy</span></div></a></li><li class="depth-1"><a href="io.pedestal.log.html#var-tag-span"><div class="inner"><span>tag-span</span></div></a></li><li class="depth-1"><a href="io.pedestal.log.html#var-trace"><div class="inner"><span>trace</span></div></a></li><li class="depth-1"><a href="io.pedestal.log.html#var-TraceOrigin"><div class="inner"><span>TraceOrigin</span></div></a></li><li class="depth-2 branch"><a href="io.pedestal.log.html#var--activate-span"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>-activate-span</span></div></a></li><li class="depth-2 branch"><a href="io.pedestal.log.html#var--active-span"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>-active-span</span></div></a></li><li class="depth-2 branch"><a href="io.pedestal.log.html#var--register"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>-register</span></div></a></li><li class="depth-2"><a href="io.pedestal.log.html#var--span"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>-span</span></div></a></li><li class="depth-1"><a href="io.pedestal.log.html#var-TraceSpan"><div class="inner"><span>TraceSpan</span></div></a></li><li class="depth-2 branch"><a href="io.pedestal.log.html#var--finish-span"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>-finish-span</span></div></a></li><li class="depth-2 branch"><a href="io.pedestal.log.html#var--set-operation-name"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>-set-operation-name</span></div></a></li><li class="depth-2"><a href="io.pedestal.log.html#var--tag-span"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>-tag-span</span></div></a></li><li class="depth-1"><a href="io.pedestal.log.html#var-TraceSpanBaggage"><div class="inner"><span>TraceSpanBaggage</span></div></a></li><li class="depth-2 branch"><a href="io.pedestal.log.html#var--get-baggage"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>-get-baggage</span></div></a></li><li class="depth-2 branch"><a href="io.pedestal.log.html#var--get-baggage-map"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>-get-baggage-map</span></div></a></li><li class="depth-2"><a href="io.pedestal.log.html#var--set-baggage"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>-set-baggage</span></div></a></li><li class="depth-1"><a href="io.pedestal.log.html#var-TraceSpanLog"><div class="inner"><span>TraceSpanLog</span></div></a></li><li class="depth-2 branch"><a href="io.pedestal.log.html#var--error-span"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>-error-span</span></div></a></li><li class="depth-2"><a href="io.pedestal.log.html#var--log-span"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>-log-span</span></div></a></li><li class="depth-1"><a href="io.pedestal.log.html#var-TraceSpanLogMap"><div class="inner"><span>TraceSpanLogMap</span></div></a></li><li class="depth-2"><a href="io.pedestal.log.html#var--log-span-map"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>-log-span-map</span></div></a></li><li class="depth-1"><a href="io.pedestal.log.html#var-warn"><div class="inner"><span>warn</span></div></a></li><li class="depth-1"><a href="io.pedestal.log.html#var-with-context"><div class="inner"><span>with-context</span></div></a></li><li class="depth-1"><a href="io.pedestal.log.html#var-with-context-kv"><div class="inner"><span>with-context-kv</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h1 class="anchor" id="top">io.pedestal.log</h1><div class="doc"><pre class="plaintext">Logging via slf4j. Each logging level is a macro: trace, debug,
info, warn, and error. Each namespace gets its own Logger. Arguments
are key-value pairs, which will be printed as with 'pr'. The special
key :exception should have a java.lang.Throwable as its value, and
will be passed separately to the underlying logging API.
One can override the logger via JVM or ENVAR settings.</pre></div><div class="public anchor" id="var-*mdc-context*"><h3>*mdc-context*</h3><h4 class="dynamic">dynamic</h4><div class="usage"></div><div class="doc"><pre class="plaintext">This map is copied into the SLF4J MDC when the `with-context` or
`with-context-kv` macros are used.  You are free to take control of
it for MDC-related purposes as it doesn't directly affect Pedestal's
logging implementation.

This map also includes all options that were passed into `with-context`.</pre></div></div><div class="public anchor" id="var-active-span"><h3>active-span</h3><div class="usage"><code>(active-span)</code></div><div class="doc"><pre class="plaintext">Return the current active span;
Returns nil if there isn't an active span.</pre></div></div><div class="public anchor" id="var-add-span-baggage.21"><h3>add-span-baggage!</h3><div class="usage"><code>(add-span-baggage! span m)</code><code>(add-span-baggage! span k v)</code><code>(add-span-baggage! span bag-k bag-v &amp; kvs)</code></div><div class="doc"><pre class="plaintext"></pre></div></div><div class="public anchor" id="var-counter"><h3>counter</h3><div class="usage"><code>(counter metric-name delta)</code><code>(counter recorder metric-name delta)</code></div><div class="doc"><pre class="plaintext"></pre></div></div><div class="public anchor" id="var-debug"><h3>debug</h3><h4 class="type">macro</h4><div class="usage"><code>(debug &amp; keyvals)</code></div><div class="doc"><pre class="plaintext"></pre></div></div><div class="public anchor" id="var-default-recorder"><h3>default-recorder</h3><div class="usage"></div><div class="doc"><pre class="plaintext">This is the default recorder of all metrics.
This value is configured by setting the JVM Property 'io.pedestal.log.defaultMetricsRecorder'
or the environment variable 'PEDESTAL_METRICS_RECORDER'.
The value of the setting should be a namespaced symbol
that resolves to a 0-arity function or nil.
That function should return something that satisfies the MetricRecorder protocol.
If no function is found, metrics will be reported only to JMX via a DropWizard MetricRegistry.</pre></div></div><div class="public anchor" id="var-default-tracer"><h3>default-tracer</h3><div class="usage"></div><div class="doc"><pre class="plaintext">This is the default Tracer, registered as the OpenTracing's GlobalTracer.
This value is configured by setting the JVM Property 'io.pedestal.log.defaultTracer'
or the environment variable 'PEDESTAL_TRACER'.
The value of the setting should be a namespaced symbol
that resolves to a 0-arity function or nil.
That function should return something that satisfies the TracerOrigin protocol.
If no function is found, the GlobalTracer will default to the NoopTracer and `GlobalTracer/isRegistered` will be false.</pre></div></div><div class="public anchor" id="var-error"><h3>error</h3><h4 class="type">macro</h4><div class="usage"><code>(error &amp; keyvals)</code></div><div class="doc"><pre class="plaintext"></pre></div></div><div class="public anchor" id="var-finish-span"><h3>finish-span</h3><div class="usage"><code>(finish-span span)</code></div><div class="doc"><pre class="plaintext">Given a span, finish the span and return it.
</pre></div></div><div class="public anchor" id="var-format-name"><h3>format-name</h3><div class="usage"><code>(format-name n)</code></div><div class="doc"><pre class="plaintext">Format a given metric name, regardless of type, into a string
</pre></div></div><div class="public anchor" id="var-gauge"><h3>gauge</h3><div class="usage"><code>(gauge metric-name value-fn)</code><code>(gauge recorder metric-name value-fn)</code></div><div class="doc"><pre class="plaintext"></pre></div></div><div class="public anchor" id="var-histogram"><h3>histogram</h3><div class="usage"><code>(histogram metric-name value)</code><code>(histogram recorder metric-name value)</code></div><div class="doc"><pre class="plaintext"></pre></div></div><div class="public anchor" id="var-info"><h3>info</h3><h4 class="type">macro</h4><div class="usage"><code>(info &amp; keyvals)</code></div><div class="doc"><pre class="plaintext"></pre></div></div><div class="public anchor" id="var-jmx-reporter"><h3>jmx-reporter</h3><div class="usage"><code>(jmx-reporter registry)</code></div><div class="doc"><pre class="plaintext"></pre></div></div><div class="public anchor" id="var-log"><h3>log</h3><div class="usage"><code>(log keyvals)</code><code>(log keyvals default-level)</code></div><div class="doc"><pre class="plaintext">This function provides basic/core logging functionality as a function.
You may prefer to use this if you need custom logging functionality beyond
what is offered by the standard Pedestal logging macros (which in turn just call the protocols).

Given a map of logging information,
  and optionally a default log-level keyword (if not found in the map) -- default is :info,
Determine the appropriate logger to use,
 determine if logging-level is enabled,
 format the logging message,
And return the result of calling the appropriate logging function, dispatched to the logging protocols.

Special keys within the log message:
 :level -- A keyword, the log level to use for this message, defaults to `default-level`
 :exception -- A Throwable/Exception to log
 :io.pedestal.log/logger -- The logger to use for this message,
                            defaults to the `override-logger` or the SLF4J logger
 :io.pedestal.log/logger-name -- A String, the loggerName to use if SLF4J logger is used,
                                 defaults to `*ns*` which may be 'clojure.core' depending on execution,
 :io.pedestal.log/formatter -- A single-arg function that when given a map, returns a String for logging,
                               defaults to `pr-str`

If using this function within a macro, you're encouraged to merge all 'meta' information
(like line info) into the log message map.
For example:

(defmacro log-macro [log-map]
(let [named-log-map (if (::logger-name log-map)
                      log-map
                      (assoc log-map ::logger-name (name (ns-name *ns*))))
      final-log-map (assoc named-log-map :line (:line (meta &amp;form)))]
  `(log ~final-log-map :info)))
</pre></div></div><div class="public anchor" id="var-log-level-dispatch"><h3>log-level-dispatch</h3><div class="usage"></div><div class="doc"><pre class="plaintext"></pre></div></div><div class="public anchor" id="var-log-reporter"><h3>log-reporter</h3><div class="usage"><code>(log-reporter registry)</code></div><div class="doc"><pre class="plaintext"></pre></div></div><div class="public anchor" id="var-log-span"><h3>log-span</h3><div class="usage"><code>(log-span span x)</code><code>(log-span span k v)</code><code>(log-span span k v &amp; kvs)</code></div><div class="doc"><pre class="plaintext">Log to a given span, and return the span.

If the log message is a string, the message is logged as an info 'message'.
If the log message is a keyword, the message is logged as an 'event', without a message.
If the log message is a Throwable, the message is logged as an 'error', with info extracted from the Throwable
If the log message is a map, the map is logged as a series of fields/values.

This also supports the same logging style as io.pedestal.log -- with any number of log keys and values.

You are encouraged to follow the OpenTracing semantics</pre></div></div><div class="public anchor" id="var-LoggerSource"><h3>LoggerSource</h3><h4 class="type">protocol</h4><div class="usage"></div><div class="doc"><pre class="plaintext"></pre></div><div class="members"><h4>members</h4><div class="inner"><div class="public anchor" id="var--debug"><h3>-debug</h3><div class="usage"><code>(-debug t body)</code><code>(-debug t body throwable)</code></div><div class="doc"><pre class="plaintext">Log a DEBUG message,
and optionally handle a special Throwable/Exception related to the message.
The body may be any of Clojure's literal data types, but a map or string is encouraged.</pre></div></div><div class="public anchor" id="var--error"><h3>-error</h3><div class="usage"><code>(-error t body)</code><code>(-error t body throwable)</code></div><div class="doc"><pre class="plaintext">Log an ERROR message,
and optionally handle a special Throwable/Exception related to the message.
The body may be any of Clojure's literal data types, but a map or string is encouraged.</pre></div></div><div class="public anchor" id="var--info"><h3>-info</h3><div class="usage"><code>(-info t body)</code><code>(-info t body throwable)</code></div><div class="doc"><pre class="plaintext">Log an INFO message,
and optionally handle a special Throwable/Exception related to the message.
The body may be any of Clojure's literal data types, but a map or string is encouraged.</pre></div></div><div class="public anchor" id="var--level-enabled.3F"><h3>-level-enabled?</h3><div class="usage"><code>(-level-enabled? t level-key)</code></div><div class="doc"><pre class="plaintext">Given the log level as a keyword,
return a boolean if that log level is currently enabled.</pre></div></div><div class="public anchor" id="var--trace"><h3>-trace</h3><div class="usage"><code>(-trace t body)</code><code>(-trace t body throwable)</code></div><div class="doc"><pre class="plaintext">Log a TRACE message,
and optionally handle a special Throwable/Exception related to the message.
The body may be any of Clojure's literal data types, but a map or string is encouraged.</pre></div></div><div class="public anchor" id="var--warn"><h3>-warn</h3><div class="usage"><code>(-warn t body)</code><code>(-warn t body throwable)</code></div><div class="doc"><pre class="plaintext">Log a WARN message,
and optionally handle a special Throwable/Exception related to the message.
The body may be any of Clojure's literal data types, but a map or string is encouraged.</pre></div></div></div></div></div><div class="public anchor" id="var-LoggingMDC"><h3>LoggingMDC</h3><h4 class="type">protocol</h4><div class="usage"></div><div class="doc"><pre class="plaintext"></pre></div><div class="members"><h4>members</h4><div class="inner"><div class="public anchor" id="var--clear-mdc"><h3>-clear-mdc</h3><div class="usage"><code>(-clear-mdc t)</code></div><div class="doc"><pre class="plaintext">Remove all entries within the MDC
and return the MDC instance.</pre></div></div><div class="public anchor" id="var--get-mdc"><h3>-get-mdc</h3><div class="usage"><code>(-get-mdc t k)</code><code>(-get-mdc t k not-found)</code></div><div class="doc"><pre class="plaintext">Given a String key and optionally a `not-found` value (which should be a String),
lookup the key in the MDC and return the value (A String);
Returns nil if the key isn't present, or `not-found` if value was supplied.</pre></div></div><div class="public anchor" id="var--put-mdc"><h3>-put-mdc</h3><div class="usage"><code>(-put-mdc t k v)</code></div><div class="doc"><pre class="plaintext">Given a String key and a String value,
Add an entry to the MDC,
and return the MDC instance.

If k is nil, the original MDC is returned.</pre></div></div><div class="public anchor" id="var--remove-mdc"><h3>-remove-mdc</h3><div class="usage"><code>(-remove-mdc t k)</code></div><div class="doc"><pre class="plaintext">Given a String key,
remove the key-value entry in the MDC if the key is present
And return the MDC instance.</pre></div></div><div class="public anchor" id="var--set-mdc"><h3>-set-mdc</h3><div class="usage"><code>(-set-mdc t m)</code></div><div class="doc"><pre class="plaintext">Given a map (of String keys and String values),
Copy all key-values from the map to the MDC
and return the MDC instance.</pre></div></div></div></div></div><div class="public anchor" id="var-maybe-init-java-util-log"><h3>maybe-init-java-util-log</h3><div class="usage"><code>(maybe-init-java-util-log)</code></div><div class="doc"><pre class="plaintext">Invoke this once when starting your application to redirect all
java.util.logging log messages to SLF4J. The current project's
dependencies must include org.slf4j/jul-to-slf4j.</pre></div></div><div class="public anchor" id="var-mdc-context-key"><h3>mdc-context-key</h3><div class="usage"></div><div class="doc"><pre class="plaintext"></pre></div></div><div class="public anchor" id="var-meter"><h3>meter</h3><div class="usage"><code>(meter metric-name)</code><code>(meter metric-name n-events)</code><code>(meter recorder metric-name n-events)</code></div><div class="doc"><pre class="plaintext"></pre></div></div><div class="public anchor" id="var-metric-registry"><h3>metric-registry</h3><div class="usage"><code>(metric-registry &amp; reporter-init-fns)</code></div><div class="doc"><pre class="plaintext">Create a metric-registry.
Optionally pass in single-arg functions, which when passed a registry,
create, start, and return a reporter.</pre></div></div><div class="public anchor" id="var-MetricRecorder"><h3>MetricRecorder</h3><h4 class="type">protocol</h4><div class="usage"></div><div class="doc"><pre class="plaintext"></pre></div><div class="members"><h4>members</h4><div class="inner"><div class="public anchor" id="var--counter"><h3>-counter</h3><div class="usage"><code>(-counter t metric-name delta)</code></div><div class="doc"><pre class="plaintext">Update a single Numeric/Long metric by the `delta` amount
</pre></div></div><div class="public anchor" id="var--gauge"><h3>-gauge</h3><div class="usage"><code>(-gauge t metric-name value-fn)</code></div><div class="doc"><pre class="plaintext">Register a single metric value, returned by a 0-arg function;
This function will be called everytime the Guage value is requested.</pre></div></div><div class="public anchor" id="var--histogram"><h3>-histogram</h3><div class="usage"><code>(-histogram t metric-name value)</code></div><div class="doc"><pre class="plaintext">Measure a distribution of Long values
</pre></div></div><div class="public anchor" id="var--meter"><h3>-meter</h3><div class="usage"><code>(-meter t metric-name n-events)</code></div><div class="doc"><pre class="plaintext">Measure the rate of a ticking metric - a meter.
</pre></div></div></div></div></div><div class="public anchor" id="var-override-logger"><h3>override-logger</h3><div class="usage"></div><div class="doc"><pre class="plaintext"></pre></div></div><div class="public anchor" id="var-span"><h3>span</h3><div class="usage"><code>(span operation-name)</code><code>(span operation-name parent-span)</code><code>(span operation-name parent-span opts)</code></div><div class="doc"><pre class="plaintext">Given an operation name,
and optionally a parent Span, and optionally a map of options
return a new Span with the operation name set, started, and active.

Options are Tracer/TraceOrigin specific but all platforms support a minimum of:
 :initial-tags - a map of initial tags for the span

If the parent is not set, the span has no parent (ie: current active spans are ignored).
If the parent is nil, the behavior is Tracer/TraceOrigin specific -- by default, the span has no parent.</pre></div></div><div class="public anchor" id="var-span-baggage"><h3>span-baggage</h3><div class="usage"><code>(span-baggage span)</code><code>(span-baggage span k)</code><code>(span-baggage span k not-found)</code></div><div class="doc"><pre class="plaintext"></pre></div></div><div class="public anchor" id="var-span-log-error-kind"><h3>span-log-error-kind</h3><div class="usage"></div><div class="doc"><pre class="plaintext"></pre></div></div><div class="public anchor" id="var-span-log-error-obj"><h3>span-log-error-obj</h3><div class="usage"></div><div class="doc"><pre class="plaintext"></pre></div></div><div class="public anchor" id="var-span-log-event"><h3>span-log-event</h3><div class="usage"></div><div class="doc"><pre class="plaintext"></pre></div></div><div class="public anchor" id="var-span-log-msg"><h3>span-log-msg</h3><div class="usage"></div><div class="doc"><pre class="plaintext"></pre></div></div><div class="public anchor" id="var-span-log-stack"><h3>span-log-stack</h3><div class="usage"></div><div class="doc"><pre class="plaintext"></pre></div></div><div class="public anchor" id="var-spy"><h3>spy</h3><h4 class="type">macro</h4><div class="usage"><code>(spy expr)</code></div><div class="doc"><pre class="plaintext">Logs expr and its value at DEBUG level, returns value.
</pre></div></div><div class="public anchor" id="var-tag-span"><h3>tag-span</h3><div class="usage"><code>(tag-span span m)</code><code>(tag-span span k v)</code><code>(tag-span span tag-k tag-v &amp; kvs)</code></div><div class="doc"><pre class="plaintext">Tag a given span.

Tags can be expressed as:
 - a single tag key and tag value
 - a sequence of tag-key tag-values.
 - a map of tag-keys -&gt; tag-values</pre></div></div><div class="public anchor" id="var-trace"><h3>trace</h3><h4 class="type">macro</h4><div class="usage"><code>(trace &amp; keyvals)</code></div><div class="doc"><pre class="plaintext"></pre></div></div><div class="public anchor" id="var-TraceOrigin"><h3>TraceOrigin</h3><h4 class="type">protocol</h4><div class="usage"></div><div class="doc"><pre class="plaintext"></pre></div><div class="members"><h4>members</h4><div class="inner"><div class="public anchor" id="var--activate-span"><h3>-activate-span</h3><div class="usage"><code>(-activate-span t span)</code></div><div class="doc"><pre class="plaintext">Given a Tracer/TraceOrigin and a span,
activate the span
and return the newly activated span.</pre></div></div><div class="public anchor" id="var--active-span"><h3>-active-span</h3><div class="usage"><code>(-active-span t)</code></div><div class="doc"><pre class="plaintext">Given a Tracer/TraceOrigin,
return the current, active Span or nil if there isn't an active span</pre></div></div><div class="public anchor" id="var--register"><h3>-register</h3><div class="usage"><code>(-register t)</code></div><div class="doc"><pre class="plaintext">Given a Tracer/TraceOrigin
perform whatver steps are necessary to register that Tracer/TraceOrigin
to support the creation of spans,
and return the Tracer/TraceOrigin.

It should not be necessary to make this call in application code.
This call is only used when bootstrapping Pedestal's `default-tracer`</pre></div></div><div class="public anchor" id="var--span"><h3>-span</h3><div class="usage"><code>(-span t operation-name)</code><code>(-span t operation-name parent)</code><code>(-span t operation-name parent opts)</code></div><div class="doc"><pre class="plaintext">Given a Tracer/TraceOrigin, an operation name,
and optionally a parent Span, and a map of additional options
return a new Span with the operation name set.
If the parent is not set, the span has no parent (ie: current active spans are ignored).

Additional options are platform specific, but all platforms should support the following:
 :initial-tags - a map of initial tags for the span

** The span may be started on creation but should not be activated **
This should be left to application-specific span builders.</pre></div></div></div></div></div><div class="public anchor" id="var-TraceSpan"><h3>TraceSpan</h3><h4 class="type">protocol</h4><div class="usage"></div><div class="doc"><pre class="plaintext"></pre></div><div class="members"><h4>members</h4><div class="inner"><div class="public anchor" id="var--finish-span"><h3>-finish-span</h3><div class="usage"><code>(-finish-span t)</code><code>(-finish-span t micros)</code></div><div class="doc"><pre class="plaintext">Given a span,
finish/complete and record the span optionally setting an explicit end timestamp in microseconds,
and return the span.
If no timestamp is specified, `now`/nanoTime is used, adjusted for microseconds.
Multiple calls to -finishSpan should be noops</pre></div></div><div class="public anchor" id="var--set-operation-name"><h3>-set-operation-name</h3><div class="usage"><code>(-set-operation-name t operation-name)</code></div><div class="doc"><pre class="plaintext">Given a span and the operation name (String),
set the logical operation this span represents,
and return the Span.</pre></div></div><div class="public anchor" id="var--tag-span"><h3>-tag-span</h3><div class="usage"><code>(-tag-span t tag-key tag-value)</code></div><div class="doc"><pre class="plaintext">Given a span, a tag key (String), and a tag value (String),
Set the tag key-value pair on the span for recording,
and returns the Span.

Some trace systems support numeric, object, boolean and other values.
The protocol encourages at a minimum String keys and values,
but extensions of the protocols are free to make platform-specific type/arg optimizations.
Some Trace platforms have semantics around tag keys/values, eg. <a href="https://github.com/opentracing/specification/blob/master/semantic_conventions.md">https://github.com/opentracing/specification/blob/master/semantic_conventions.md</a></pre></div></div></div></div></div><div class="public anchor" id="var-TraceSpanBaggage"><h3>TraceSpanBaggage</h3><h4 class="type">protocol</h4><div class="usage"></div><div class="doc"><pre class="plaintext"></pre></div><div class="members"><h4>members</h4><div class="inner"><div class="public anchor" id="var--get-baggage"><h3>-get-baggage</h3><div class="usage"><code>(-get-baggage t k)</code><code>(-get-baggage t k not-found)</code></div><div class="doc"><pre class="plaintext">Given a span, a baggage key, and optionally a `not-found` value,
return the baggage value (String) for the corresponding key (if present).
If the key isn't present, return `not-found` or nil.</pre></div></div><div class="public anchor" id="var--get-baggage-map"><h3>-get-baggage-map</h3><div class="usage"><code>(-get-baggage-map t)</code></div><div class="doc"><pre class="plaintext">Given a span,
return a Map of all baggage items.</pre></div></div><div class="public anchor" id="var--set-baggage"><h3>-set-baggage</h3><div class="usage"><code>(-set-baggage t k v)</code></div><div class="doc"><pre class="plaintext">Given a span, a baggage key (String) and baggage value (String),
add the key and value to the Span (and any additional context holding the span).
and return the Span

Adding baggage allows keys/values to be smuggled across span boundaries,
creating a powerful distributed context.
Baggage is only propagated to children of the span.</pre></div></div></div></div></div><div class="public anchor" id="var-TraceSpanLog"><h3>TraceSpanLog</h3><h4 class="type">protocol</h4><div class="usage"></div><div class="doc"><pre class="plaintext"></pre></div><div class="members"><h4>members</h4><div class="inner"><div class="public anchor" id="var--error-span"><h3>-error-span</h3><div class="usage"><code>(-error-span t throwable)</code><code>(-error-span t throwable micros)</code></div><div class="doc"><pre class="plaintext">Given a span, a Throwable, and optionally an explicit timestamp in microseconds,
Record the error to the span as an 'error', attaching Message, Error.Kind and Error.Object to the span,
and return the span.</pre></div></div><div class="public anchor" id="var--log-span"><h3>-log-span</h3><div class="usage"><code>(-log-span t msg)</code><code>(-log-span t msg micros)</code></div><div class="doc"><pre class="plaintext">Given a span, a log message/event, and optionally an explicit timestamp in microseconds,
Record the message to the span,
and return the span.

If the message is a keyword, the message is recorded as an 'event',
otherwise message is coerced into a string and recorded as a 'message'.

If no timestamp is specified, `now`/nanoTime is used, adjusted for microseconds.</pre></div></div></div></div></div><div class="public anchor" id="var-TraceSpanLogMap"><h3>TraceSpanLogMap</h3><h4 class="type">protocol</h4><div class="usage"></div><div class="doc"><pre class="plaintext"></pre></div><div class="members"><h4>members</h4><div class="inner"><div class="public anchor" id="var--log-span-map"><h3>-log-span-map</h3><div class="usage"><code>(-log-span-map t msg-map)</code><code>(-log-span-map t msg-map micros)</code></div><div class="doc"><pre class="plaintext">Given a span, a map of fields, and optionally an explicit timestamp in microseconds,
Record the event to the span,
and return the span.

Semantic log fields can be found at: <a href="https://github.com/opentracing/specification/blob/master/semantic_conventions.md#log-fields-table">https://github.com/opentracing/specification/blob/master/semantic_conventions.md#log-fields-table</a>

Some Trace Recorders don't fully support round-tripping maps -- use carefully.
Some Trace platforms have semantics around key/values, eg. <a href="https://github.com/opentracing/specification/blob/master/semantic_conventions.md">https://github.com/opentracing/specification/blob/master/semantic_conventions.md</a></pre></div></div></div></div></div><div class="public anchor" id="var-warn"><h3>warn</h3><h4 class="type">macro</h4><div class="usage"><code>(warn &amp; keyvals)</code></div><div class="doc"><pre class="plaintext"></pre></div></div><div class="public anchor" id="var-with-context"><h3>with-context</h3><h4 class="type">macro</h4><div class="usage"><code>(with-context ctx-map &amp; body)</code></div><div class="doc"><pre class="plaintext">Given a map of keys/values/options and a body,
Set the map into the MDC via the *mdc-context* binding.
The MDC used defaults to SLF4J MDC unless the `:io.pedestal.log/mdc`
option is specified (see Options).
All options from the map are removed when setting the MDC.

By default, the map is formatted into a string value and stored
under the 'io.pedestal' key, via `io.pedestal.log/mdc-context-key`

Caveats:
SLF4J MDC, only maintains thread-local bindings, users are encouraged to
use app-specific MDC implementations when needed.

Since SLF4J MDC manages data on a per-thread basis, false
information may be contained in the MDC if threads are
recycled. Refer to the slf4j
[docs](<a href="https://logback.qos.ch/manual/mdc.html#autoMDC)">https://logback.qos.ch/manual/mdc.html#autoMDC)</a> for more
information.


Options:
 :io.pedestal.log/formatter - a single-arg function that when given the map, returns a formatted string
                              Defaults to `pr-str`
 :io.pedestal.log/mdc - An object that satisfies the LoggingMDC protocol
                        Defaults to the SLF4J MDC.

Note:
If you mix `with-context` with the more basic `with-context-kv`, you may see undesired keys/values in the log</pre></div></div><div class="public anchor" id="var-with-context-kv"><h3>with-context-kv</h3><h4 class="type">macro</h4><div class="usage"><code>(with-context-kv k v &amp; body)</code></div><div class="doc"><pre class="plaintext">Given a key, value, and body,
associates the key-value pair into the *mdc-context* only for the scope/execution of `body`,
and sets the *mdc-context* into the SLF4J MDC
 under the 'io.pedestal' key (via `io.pedestal.log/mdc-context-key`) using `pr-str` on the map for the MDC value.

Note:
No keys are are dissoc'd from *mdc-context* with this simplified version.
If you mix `with-context` and `with-context-kv`, you may see undesired keys/values in the log</pre></div></div></div></body></html>