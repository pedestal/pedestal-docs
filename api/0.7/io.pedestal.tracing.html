<!DOCTYPE html PUBLIC ""
    "">
<html><head><meta charset="UTF-8" /><title>io.pedestal.tracing documentation</title><link rel="stylesheet" type="text/css" href="css/default.css" /><link rel="stylesheet" type="text/css" href="css/highlight.css" /><script type="text/javascript" src="js/highlight.min.js"></script><script type="text/javascript" src="js/jquery.min.js"></script><script type="text/javascript" src="js/page_effects.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html"><span class="project-title"><span class="project-name">io.pedestal libraries</span> <span class="project-version">0.7.1</span></span></a></h1></div><div class="sidebar primary"><h3 class="no-link"><span class="inner">Project</span></h3><ul class="index-link"><li class="depth-1 "><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>io</span></div></div></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>pedestal</span></div></div></li><li class="depth-3 branch"><a href="io.pedestal.environment.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>environment</span></div></a></li><li class="depth-3"><a href="io.pedestal.http.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>http</span></div></a></li><li class="depth-4 branch"><a href="io.pedestal.http.body-params.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>body-params</span></div></a></li><li class="depth-4 branch"><a href="io.pedestal.http.container.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>container</span></div></a></li><li class="depth-4 branch"><a href="io.pedestal.http.content-negotiation.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>content-negotiation</span></div></a></li><li class="depth-4 branch"><a href="io.pedestal.http.cors.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>cors</span></div></a></li><li class="depth-4 branch"><a href="io.pedestal.http.csrf.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>csrf</span></div></a></li><li class="depth-4"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>impl</span></div></div></li><li class="depth-5"><a href="io.pedestal.http.impl.servlet-interceptor.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>servlet-interceptor</span></div></a></li><li class="depth-6"><a href="io.pedestal.http.impl.servlet-interceptor.specs.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>specs</span></div></a></li><li class="depth-4"><a href="io.pedestal.http.jetty.html"><div class="inner"><span class="tree" style="top: -83px;"><span class="top" style="height: 92px;"></span><span class="bottom"></span></span><span>jetty</span></div></a></li><li class="depth-5 branch"><a href="io.pedestal.http.jetty.container.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>container</span></div></a></li><li class="depth-5"><a href="io.pedestal.http.jetty.util.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>util</span></div></a></li><li class="depth-4 branch"><a href="io.pedestal.http.params.html"><div class="inner"><span class="tree" style="top: -83px;"><span class="top" style="height: 92px;"></span><span class="bottom"></span></span><span>params</span></div></a></li><li class="depth-4"><a href="io.pedestal.http.request.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>request</span></div></a></li><li class="depth-5 branch"><a href="io.pedestal.http.request.lazy.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>lazy</span></div></a></li><li class="depth-5 branch"><a href="io.pedestal.http.request.map.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>map</span></div></a></li><li class="depth-5 branch"><a href="io.pedestal.http.request.servlet-support.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>servlet-support</span></div></a></li><li class="depth-5"><a href="io.pedestal.http.request.zerocopy.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>zerocopy</span></div></a></li><li class="depth-4 branch"><a href="io.pedestal.http.ring-middlewares.html"><div class="inner"><span class="tree" style="top: -145px;"><span class="top" style="height: 154px;"></span><span class="bottom"></span></span><span>ring-middlewares</span></div></a></li><li class="depth-4"><a href="io.pedestal.http.route.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>route</span></div></a></li><li class="depth-5"><a href="io.pedestal.http.route.definition.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>definition</span></div></a></li><li class="depth-6 branch"><a href="io.pedestal.http.route.definition.table.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>table</span></div></a></li><li class="depth-6 branch"><a href="io.pedestal.http.route.definition.terse.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>terse</span></div></a></li><li class="depth-6"><a href="io.pedestal.http.route.definition.verbose.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>verbose</span></div></a></li><li class="depth-5 branch"><a href="io.pedestal.http.route.linear-search.html"><div class="inner"><span class="tree" style="top: -114px;"><span class="top" style="height: 123px;"></span><span class="bottom"></span></span><span>linear-search</span></div></a></li><li class="depth-5 branch"><a href="io.pedestal.http.route.map-tree.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>map-tree</span></div></a></li><li class="depth-5 branch"><a href="io.pedestal.http.route.path.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>path</span></div></a></li><li class="depth-5 branch"><a href="io.pedestal.http.route.prefix-tree.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>prefix-tree</span></div></a></li><li class="depth-5 branch"><a href="io.pedestal.http.route.router.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>router</span></div></a></li><li class="depth-5"><a href="io.pedestal.http.route.specs.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>specs</span></div></a></li><li class="depth-4 branch"><a href="io.pedestal.http.secure-headers.html"><div class="inner"><span class="tree" style="top: -331px;"><span class="top" style="height: 340px;"></span><span class="bottom"></span></span><span>secure-headers</span></div></a></li><li class="depth-4 branch"><a href="io.pedestal.http.servlet.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>servlet</span></div></a></li><li class="depth-4 branch"><a href="io.pedestal.http.specs.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>specs</span></div></a></li><li class="depth-4 branch"><a href="io.pedestal.http.sse.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>sse</span></div></a></li><li class="depth-4"><a href="io.pedestal.http.tracing.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>tracing</span></div></a></li><li class="depth-3"><a href="io.pedestal.interceptor.html"><div class="inner"><span class="tree" style="top: -1075px;"><span class="top" style="height: 1084px;"></span><span class="bottom"></span></span><span>interceptor</span></div></a></li><li class="depth-4"><a href="io.pedestal.interceptor.chain.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>chain</span></div></a></li><li class="depth-5"><a href="io.pedestal.interceptor.chain.debug.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>debug</span></div></a></li><li class="depth-4 branch"><a href="io.pedestal.interceptor.error.html"><div class="inner"><span class="tree" style="top: -52px;"><span class="top" style="height: 61px;"></span><span class="bottom"></span></span><span>error</span></div></a></li><li class="depth-4 branch"><a href="io.pedestal.interceptor.helpers.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>helpers</span></div></a></li><li class="depth-4 branch"><a href="io.pedestal.interceptor.specs.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>specs</span></div></a></li><li class="depth-4"><a href="io.pedestal.interceptor.trace.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>trace</span></div></a></li><li class="depth-3 branch"><a href="io.pedestal.log.html"><div class="inner"><span class="tree" style="top: -207px;"><span class="top" style="height: 216px;"></span><span class="bottom"></span></span><span>log</span></div></a></li><li class="depth-3"><a href="io.pedestal.metrics.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>metrics</span></div></a></li><li class="depth-4 branch"><a href="io.pedestal.metrics.codahale.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>codahale</span></div></a></li><li class="depth-4 branch"><a href="io.pedestal.metrics.otel.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>otel</span></div></a></li><li class="depth-4"><a href="io.pedestal.metrics.spi.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>spi</span></div></a></li><li class="depth-3"><div class="no-link"><div class="inner"><span class="tree" style="top: -114px;"><span class="top" style="height: 123px;"></span><span class="bottom"></span></span><span>service-tools</span></div></div></li><li class="depth-4 branch"><a href="io.pedestal.service-tools.dev.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>dev</span></div></a></li><li class="depth-4"><a href="io.pedestal.service-tools.war.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>war</span></div></a></li><li class="depth-3"><div class="no-link"><div class="inner"><span class="tree" style="top: -83px;"><span class="top" style="height: 92px;"></span><span class="bottom"></span></span><span>telemetry</span></div></div></li><li class="depth-4"><a href="io.pedestal.telemetry.otel-global-init.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>otel-global-init</span></div></a></li><li class="depth-3 branch"><a href="io.pedestal.test.html"><div class="inner"><span class="tree" style="top: -52px;"><span class="top" style="height: 61px;"></span><span class="bottom"></span></span><span>test</span></div></a></li><li class="depth-3 current"><a href="io.pedestal.tracing.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>tracing</span></div></a></li><li class="depth-4"><a href="io.pedestal.tracing.spi.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>spi</span></div></a></li><li class="depth-3"><a href="io.pedestal.websocket.html"><div class="inner"><span class="tree" style="top: -52px;"><span class="top" style="height: 61px;"></span><span class="bottom"></span></span><span>websocket</span></div></a></li><li class="depth-4"><a href="io.pedestal.websocket.specs.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>specs</span></div></a></li></ul></div><div class="sidebar secondary"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="io.pedestal.tracing.html#var-*context*"><div class="inner"><span>*context*</span></div></a></li><li class="depth-1"><a href="io.pedestal.tracing.html#var-*tracing-source*"><div class="inner"><span>*tracing-source*</span></div></a></li><li class="depth-1"><a href="io.pedestal.tracing.html#var-add-attribute"><div class="inner"><span>add-attribute</span></div></a></li><li class="depth-1"><a href="io.pedestal.tracing.html#var-as-root"><div class="inner"><span>as-root</span></div></a></li><li class="depth-1"><a href="io.pedestal.tracing.html#var-create-span"><div class="inner"><span>create-span</span></div></a></li><li class="depth-1"><a href="io.pedestal.tracing.html#var-end-span"><div class="inner"><span>end-span</span></div></a></li><li class="depth-1"><a href="io.pedestal.tracing.html#var-make-context-current"><div class="inner"><span>make-context-current</span></div></a></li><li class="depth-1"><a href="io.pedestal.tracing.html#var-make-span-context"><div class="inner"><span>make-span-context</span></div></a></li><li class="depth-1"><a href="io.pedestal.tracing.html#var-record-exception"><div class="inner"><span>record-exception</span></div></a></li><li class="depth-1"><a href="io.pedestal.tracing.html#var-rename-span"><div class="inner"><span>rename-span</span></div></a></li><li class="depth-1"><a href="io.pedestal.tracing.html#var-set-status-code"><div class="inner"><span>set-status-code</span></div></a></li><li class="depth-1"><a href="io.pedestal.tracing.html#var-start"><div class="inner"><span>start</span></div></a></li><li class="depth-1"><a href="io.pedestal.tracing.html#var-with-kind"><div class="inner"><span>with-kind</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h1 class="anchor" id="top">io.pedestal.tracing</h1><h4 class="added">added in 0.7.0</h4><div class="doc"><div class="markdown"><p>Wrappers around Open Telemetry tracing.</p>
</div></div><div class="public anchor" id="var-*context*"><h3>*context*</h3><h4 class="dynamic">dynamic</h4><div class="usage"></div><div class="doc"><div class="markdown"><p>The active OpenTelemetry context used as the parent of any created spans.  If nil, then the span is created with the OpenTelemetry’s default current context.</p>
<p>This is designed to be bound when a span is created so that new spans created subsequently in other threads (typically, asynchronous execution) can connect to the appropriate context. In those cases, OpenTelemetry’s current context is not always accurate, as it is stored in a thread-local variable.</p>
</div></div><div class="src-link"><a href="https://github.com/pedestal/pedestal/blob/0.7.1/telemetry/src/io/pedestal/tracing.clj#L24">view source</a></div></div><div class="public anchor" id="var-*tracing-source*"><h3>*tracing-source*</h3><h4 class="dynamic">dynamic</h4><div class="usage"></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/pedestal/pedestal/blob/0.7.1/telemetry/src/io/pedestal/tracing.clj#L21">view source</a></div></div><div class="public anchor" id="var-add-attribute"><h3>add-attribute</h3><div class="usage"><code>(add-attribute span attribute-key attribute-value)</code></div><div class="doc"><div class="markdown"><p>Adds an attribute to a span, typically, to record response attributes such as the status code. This should not be called after the span has ended.</p>
</div></div><div class="src-link"><a href="https://github.com/pedestal/pedestal/blob/0.7.1/telemetry/src/io/pedestal/tracing.clj#L67">view source</a></div></div><div class="public anchor" id="var-as-root"><h3>as-root</h3><div class="usage"><code>(as-root builder)</code></div><div class="doc"><div class="markdown"><p>Identifies the new span as a root span, with no parent.  When this is not called, and span is active in the Open Telemetry context, the active span will be the parent of the new span when the span is started.</p>
</div></div><div class="src-link"><a href="https://github.com/pedestal/pedestal/blob/0.7.1/telemetry/src/io/pedestal/tracing.clj#L54">view source</a></div></div><div class="public anchor" id="var-create-span"><h3>create-span</h3><div class="usage"><code>(create-span operation-name attributes)</code><code>(create-span tracing-source operation-name attributes)</code></div><div class="doc"><div class="markdown"><p>Creates a new span builder, which allows configuration of the span prior to starting it.</p>
</div></div><div class="src-link"><a href="https://github.com/pedestal/pedestal/blob/0.7.1/telemetry/src/io/pedestal/tracing.clj#L34">view source</a></div></div><div class="public anchor" id="var-end-span"><h3>end-span</h3><div class="usage"><code>(end-span span)</code></div><div class="doc"><div class="markdown"><p>Ends the span, which will set its termination time to current time.  Every started span must be ended.</p>
<p>Returns nil.</p>
</div></div><div class="src-link"><a href="https://github.com/pedestal/pedestal/blob/0.7.1/telemetry/src/io/pedestal/tracing.clj#L74">view source</a></div></div><div class="public anchor" id="var-make-context-current"><h3>make-context-current</h3><div class="usage"><code>(make-context-current context)</code></div><div class="doc"><div class="markdown"><p>Makes the context the current context, returning a no-args function to close the scope (restoring the prior current scope).</p>
</div></div><div class="src-link"><a href="https://github.com/pedestal/pedestal/blob/0.7.1/telemetry/src/io/pedestal/tracing.clj#L105">view source</a></div></div><div class="public anchor" id="var-make-span-context"><h3>make-span-context</h3><div class="usage"><code>(make-span-context span)</code></div><div class="doc"><div class="markdown"><p>Creates a Context with the current context and the provided span.</p>
</div></div><div class="src-link"><a href="https://github.com/pedestal/pedestal/blob/0.7.1/telemetry/src/io/pedestal/tracing.clj#L100">view source</a></div></div><div class="public anchor" id="var-record-exception"><h3>record-exception</h3><div class="usage"><code>(record-exception span e)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/pedestal/pedestal/blob/0.7.1/telemetry/src/io/pedestal/tracing.clj#L96">view source</a></div></div><div class="public anchor" id="var-rename-span"><h3>rename-span</h3><div class="usage"><code>(rename-span span span-name)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/pedestal/pedestal/blob/0.7.1/telemetry/src/io/pedestal/tracing.clj#L82">view source</a></div></div><div class="public anchor" id="var-set-status-code"><h3>set-status-code</h3><div class="usage"><code>(set-status-code span status-code)</code></div><div class="doc"><div class="markdown"><p>Set the status code of the span to either :ok, :error, or :unset.</p>
</div></div><div class="src-link"><a href="https://github.com/pedestal/pedestal/blob/0.7.1/telemetry/src/io/pedestal/tracing.clj#L91">view source</a></div></div><div class="public anchor" id="var-start"><h3>start</h3><div class="usage"><code>(start builder)</code></div><div class="doc"><div class="markdown"><p>Builds the span from the span builder, starting and returning it.</p>
</div></div><div class="src-link"><a href="https://github.com/pedestal/pedestal/blob/0.7.1/telemetry/src/io/pedestal/tracing.clj#L60">view source</a></div></div><div class="public anchor" id="var-with-kind"><h3>with-kind</h3><div class="usage"><code>(with-kind builder kind)</code></div><div class="doc"><div class="markdown"><p>Updates the span builder to label the new span with a kind (:internal, :server, :client, :producer, or :consumer).</p>
</div></div><div class="src-link"><a href="https://github.com/pedestal/pedestal/blob/0.7.1/telemetry/src/io/pedestal/tracing.clj#L49">view source</a></div></div></div></body></html>