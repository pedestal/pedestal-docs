<!DOCTYPE html PUBLIC ""
    "">
<html><head><meta charset="UTF-8" /><title>io.pedestal.http.route documentation</title><link rel="stylesheet" type="text/css" href="css/default.css" /><link rel="stylesheet" type="text/css" href="css/highlight.css" /><script type="text/javascript" src="js/highlight.min.js"></script><script type="text/javascript" src="js/jquery.min.js"></script><script type="text/javascript" src="js/page_effects.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html"><span class="project-title"><span class="project-name">io.pedestal libraries</span> <span class="project-version">0.7.0-beta-3</span></span></a></h1></div><div class="sidebar primary"><h3 class="no-link"><span class="inner">Project</span></h3><ul class="index-link"><li class="depth-1 "><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>io</span></div></div></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>pedestal</span></div></div></li><li class="depth-3 branch"><a href="io.pedestal.environment.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>environment</span></div></a></li><li class="depth-3"><a href="io.pedestal.http.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>http</span></div></a></li><li class="depth-4 branch"><a href="io.pedestal.http.body-params.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>body-params</span></div></a></li><li class="depth-4 branch"><a href="io.pedestal.http.container.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>container</span></div></a></li><li class="depth-4 branch"><a href="io.pedestal.http.content-negotiation.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>content-negotiation</span></div></a></li><li class="depth-4 branch"><a href="io.pedestal.http.cors.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>cors</span></div></a></li><li class="depth-4 branch"><a href="io.pedestal.http.csrf.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>csrf</span></div></a></li><li class="depth-4"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>impl</span></div></div></li><li class="depth-5"><a href="io.pedestal.http.impl.servlet-interceptor.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>servlet-interceptor</span></div></a></li><li class="depth-6"><a href="io.pedestal.http.impl.servlet-interceptor.specs.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>specs</span></div></a></li><li class="depth-4"><a href="io.pedestal.http.jetty.html"><div class="inner"><span class="tree" style="top: -83px;"><span class="top" style="height: 92px;"></span><span class="bottom"></span></span><span>jetty</span></div></a></li><li class="depth-5 branch"><a href="io.pedestal.http.jetty.container.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>container</span></div></a></li><li class="depth-5"><a href="io.pedestal.http.jetty.util.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>util</span></div></a></li><li class="depth-4 branch"><a href="io.pedestal.http.params.html"><div class="inner"><span class="tree" style="top: -83px;"><span class="top" style="height: 92px;"></span><span class="bottom"></span></span><span>params</span></div></a></li><li class="depth-4"><a href="io.pedestal.http.request.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>request</span></div></a></li><li class="depth-5 branch"><a href="io.pedestal.http.request.lazy.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>lazy</span></div></a></li><li class="depth-5 branch"><a href="io.pedestal.http.request.map.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>map</span></div></a></li><li class="depth-5 branch"><a href="io.pedestal.http.request.servlet-support.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>servlet-support</span></div></a></li><li class="depth-5"><a href="io.pedestal.http.request.zerocopy.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>zerocopy</span></div></a></li><li class="depth-4 branch"><a href="io.pedestal.http.ring-middlewares.html"><div class="inner"><span class="tree" style="top: -145px;"><span class="top" style="height: 154px;"></span><span class="bottom"></span></span><span>ring-middlewares</span></div></a></li><li class="depth-4 current"><a href="io.pedestal.http.route.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>route</span></div></a></li><li class="depth-5"><a href="io.pedestal.http.route.definition.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>definition</span></div></a></li><li class="depth-6 branch"><a href="io.pedestal.http.route.definition.table.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>table</span></div></a></li><li class="depth-6 branch"><a href="io.pedestal.http.route.definition.terse.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>terse</span></div></a></li><li class="depth-6"><a href="io.pedestal.http.route.definition.verbose.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>verbose</span></div></a></li><li class="depth-5 branch"><a href="io.pedestal.http.route.linear-search.html"><div class="inner"><span class="tree" style="top: -114px;"><span class="top" style="height: 123px;"></span><span class="bottom"></span></span><span>linear-search</span></div></a></li><li class="depth-5 branch"><a href="io.pedestal.http.route.map-tree.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>map-tree</span></div></a></li><li class="depth-5 branch"><a href="io.pedestal.http.route.path.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>path</span></div></a></li><li class="depth-5 branch"><a href="io.pedestal.http.route.prefix-tree.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>prefix-tree</span></div></a></li><li class="depth-5 branch"><a href="io.pedestal.http.route.router.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>router</span></div></a></li><li class="depth-5"><a href="io.pedestal.http.route.specs.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>specs</span></div></a></li><li class="depth-4 branch"><a href="io.pedestal.http.secure-headers.html"><div class="inner"><span class="tree" style="top: -331px;"><span class="top" style="height: 340px;"></span><span class="bottom"></span></span><span>secure-headers</span></div></a></li><li class="depth-4 branch"><a href="io.pedestal.http.servlet.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>servlet</span></div></a></li><li class="depth-4 branch"><a href="io.pedestal.http.specs.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>specs</span></div></a></li><li class="depth-4 branch"><a href="io.pedestal.http.sse.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>sse</span></div></a></li><li class="depth-4"><a href="io.pedestal.http.tracing.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>tracing</span></div></a></li><li class="depth-3"><a href="io.pedestal.interceptor.html"><div class="inner"><span class="tree" style="top: -1075px;"><span class="top" style="height: 1084px;"></span><span class="bottom"></span></span><span>interceptor</span></div></a></li><li class="depth-4"><a href="io.pedestal.interceptor.chain.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>chain</span></div></a></li><li class="depth-5"><a href="io.pedestal.interceptor.chain.debug.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>debug</span></div></a></li><li class="depth-4 branch"><a href="io.pedestal.interceptor.error.html"><div class="inner"><span class="tree" style="top: -52px;"><span class="top" style="height: 61px;"></span><span class="bottom"></span></span><span>error</span></div></a></li><li class="depth-4 branch"><a href="io.pedestal.interceptor.helpers.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>helpers</span></div></a></li><li class="depth-4 branch"><a href="io.pedestal.interceptor.specs.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>specs</span></div></a></li><li class="depth-4"><a href="io.pedestal.interceptor.trace.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>trace</span></div></a></li><li class="depth-3 branch"><a href="io.pedestal.log.html"><div class="inner"><span class="tree" style="top: -207px;"><span class="top" style="height: 216px;"></span><span class="bottom"></span></span><span>log</span></div></a></li><li class="depth-3"><a href="io.pedestal.metrics.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>metrics</span></div></a></li><li class="depth-4 branch"><a href="io.pedestal.metrics.codahale.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>codahale</span></div></a></li><li class="depth-4 branch"><a href="io.pedestal.metrics.otel.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>otel</span></div></a></li><li class="depth-4"><a href="io.pedestal.metrics.spi.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>spi</span></div></a></li><li class="depth-3"><div class="no-link"><div class="inner"><span class="tree" style="top: -114px;"><span class="top" style="height: 123px;"></span><span class="bottom"></span></span><span>service-tools</span></div></div></li><li class="depth-4 branch"><a href="io.pedestal.service-tools.dev.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>dev</span></div></a></li><li class="depth-4"><a href="io.pedestal.service-tools.war.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>war</span></div></a></li><li class="depth-3"><div class="no-link"><div class="inner"><span class="tree" style="top: -83px;"><span class="top" style="height: 92px;"></span><span class="bottom"></span></span><span>telemetry</span></div></div></li><li class="depth-4"><a href="io.pedestal.telemetry.otel-global-init.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>otel-global-init</span></div></a></li><li class="depth-3 branch"><a href="io.pedestal.test.html"><div class="inner"><span class="tree" style="top: -52px;"><span class="top" style="height: 61px;"></span><span class="bottom"></span></span><span>test</span></div></a></li><li class="depth-3"><a href="io.pedestal.tracing.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>tracing</span></div></a></li><li class="depth-4"><a href="io.pedestal.tracing.spi.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>spi</span></div></a></li><li class="depth-3"><a href="io.pedestal.websocket.html"><div class="inner"><span class="tree" style="top: -52px;"><span class="top" style="height: 61px;"></span><span class="bottom"></span></span><span>websocket</span></div></a></li><li class="depth-4"><a href="io.pedestal.websocket.specs.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>specs</span></div></a></li></ul></div><div class="sidebar secondary"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="io.pedestal.http.route.html#var-*print-routing-table*"><div class="inner"><span>*print-routing-table*</span></div></a></li><li class="depth-1"><a href="io.pedestal.http.route.html#var-decode-query-part"><div class="inner"><span>decode-query-part</span></div></a></li><li class="depth-1"><a href="io.pedestal.http.route.html#var-encode-query-part"><div class="inner"><span>encode-query-part</span></div></a></li><li class="depth-1"><a href="io.pedestal.http.route.html#var-expand-routes"><div class="inner"><span>expand-routes</span></div></a></li><li class="depth-1"><a href="io.pedestal.http.route.html#var-ExpandableRoutes"><div class="inner"><span>ExpandableRoutes</span></div></a></li><li class="depth-2"><a href="io.pedestal.http.route.html#var--expand-routes"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>-expand-routes</span></div></a></li><li class="depth-1"><a href="io.pedestal.http.route.html#var-form-action-for-routes"><div class="inner"><span>form-action-for-routes</span></div></a></li><li class="depth-1"><a href="io.pedestal.http.route.html#var-method-param"><div class="inner"><span>method-param</span></div></a></li><li class="depth-1"><a href="io.pedestal.http.route.html#var-parse-param-map"><div class="inner"><span>parse-param-map</span></div></a></li><li class="depth-1"><a href="io.pedestal.http.route.html#var-parse-path-params"><div class="inner"><span>parse-path-params</span></div></a></li><li class="depth-1"><a href="io.pedestal.http.route.html#var-parse-query-params"><div class="inner"><span>parse-query-params</span></div></a></li><li class="depth-1"><a href="io.pedestal.http.route.html#var-parse-query-string"><div class="inner"><span>parse-query-string</span></div></a></li><li class="depth-1"><a href="io.pedestal.http.route.html#var-path-params-decoder"><div class="inner"><span>path-params-decoder</span></div></a></li><li class="depth-1"><a href="io.pedestal.http.route.html#var-print-routes"><div class="inner"><span>print-routes</span></div></a></li><li class="depth-1"><a href="io.pedestal.http.route.html#var-query-params"><div class="inner"><span>query-params</span></div></a></li><li class="depth-1"><a href="io.pedestal.http.route.html#var-router"><div class="inner"><span>router</span></div></a></li><li class="depth-1"><a href="io.pedestal.http.route.html#var-router-implementations"><div class="inner"><span>router-implementations</span></div></a></li><li class="depth-1"><a href="io.pedestal.http.route.html#var-RouterSpecification"><div class="inner"><span>RouterSpecification</span></div></a></li><li class="depth-2"><a href="io.pedestal.http.route.html#var-router-spec"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>router-spec</span></div></a></li><li class="depth-1"><a href="io.pedestal.http.route.html#var-routes-from"><div class="inner"><span>routes-from</span></div></a></li><li class="depth-1"><a href="io.pedestal.http.route.html#var-try-routing-for"><div class="inner"><span>try-routing-for</span></div></a></li><li class="depth-1"><a href="io.pedestal.http.route.html#var-url-for"><div class="inner"><span>url-for</span></div></a></li><li class="depth-1"><a href="io.pedestal.http.route.html#var-url-for-routes"><div class="inner"><span>url-for-routes</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h1 class="anchor" id="top">io.pedestal.http.route</h1><div class="doc"><div class="markdown"></div></div><div class="public anchor" id="var-*print-routing-table*"><h3>*print-routing-table*</h3><h4 class="dynamic">dynamic</h4><h4 class="added">added in 0.7.0</h4><div class="usage"></div><div class="doc"><div class="markdown"><p>If true, then the routing table is printed to the console at startup, and when it changes.</p>
<p>Defaults to <a href="io.pedestal.environment.html#var-dev-mode.3F">dev-mode?</a>.</p>
</div></div><div class="src-link"><a href="https://github.com/pedestal/pedestal/blob/0.7.0-beta-3/route/src/io/pedestal/http/route.clj#L31">view source</a></div></div><div class="public anchor" id="var-decode-query-part"><h3>decode-query-part</h3><div class="usage"><code>(decode-query-part string)</code></div><div class="doc"><div class="markdown"><p>Decodes one key or value of URL-encoded UTF-8 characters in a URL query string.</p>
</div></div><div class="src-link"><a href="https://github.com/pedestal/pedestal/blob/0.7.0-beta-3/route/src/io/pedestal/http/route.clj#L45">view source</a></div></div><div class="public anchor" id="var-encode-query-part"><h3>encode-query-part</h3><div class="usage"><code>(encode-query-part string)</code></div><div class="doc"><div class="markdown"><p>Encodes one key or value for a UTF-8 URL-encoded query string. Encodes space as +.</p>
</div></div><div class="src-link"><a href="https://github.com/pedestal/pedestal/blob/0.7.0-beta-3/route/src/io/pedestal/http/route.clj#L51">view source</a></div></div><div class="public anchor" id="var-expand-routes"><h3>expand-routes</h3><div class="usage"><code>(expand-routes route-spec)</code></div><div class="doc"><div class="markdown"><p>Given a value (the route specification), produce and return a routing table, a seq of verbose routing maps. The routing table can then be converted to a <a href="io.pedestal.http.route.router.html#var-Router">Router</a> using a number of routing algorithms.</p>
<p>A route specification is any type that satisfies <a href="io.pedestal.http.route.html#var-ExpandableRoutes">ExpandableRoutes</a>; this includes Clojure vectors, maps, and sets (for terse, table, and verbose routes).</p>
<p>Ensures the integrity of expanded routes (even if they’ve already been checked):</p>
<ul>
<li>Constraints are correctly ordered (most specific to least specific)</li>
<li>Route names are unique</li>
</ul>
</div></div><div class="src-link"><a href="https://github.com/pedestal/pedestal/blob/0.7.0-beta-3/route/src/io/pedestal/http/route.clj#L400">view source</a></div></div><div class="public anchor" id="var-ExpandableRoutes"><h3>ExpandableRoutes</h3><h4 class="type">protocol</h4><div class="usage"></div><div class="doc"><div class="markdown"><p>A protocol extended onto types that can be used to convert instances into a seq of verbose route maps, the routing table.</p>
<p>Built-in implementations map vectors to <a href="io.pedestal.http.route.definition.terse.html#var-terse-routes">terse-routes</a>, sets to <a href="io.pedestal.http.route.definition.table.html#var-table-routes">table-routes</a>, and maps to <a href="io.pedestal.http.route.definition.terse.html#var-map-routes-.3Evec-routes">map-routes-&gt;vec-routes</a>.</p>
</div></div><div class="members"><h4>members</h4><div class="inner"><div class="public anchor" id="var--expand-routes"><h3>-expand-routes</h3><div class="usage"><code>(-expand-routes expandable-route-spec)</code></div><div class="doc"><div class="markdown"><p>Generate and return the routing table from a given expandable form of routing data.</p>
</div></div></div></div></div><div class="src-link"><a href="https://github.com/pedestal/pedestal/blob/0.7.0-beta-3/route/src/io/pedestal/http/route.clj#L377">view source</a></div></div><div class="public anchor" id="var-form-action-for-routes"><h3>form-action-for-routes</h3><div class="usage"><code>(form-action-for-routes routes &amp; default-options)</code></div><div class="doc"><div class="markdown"><p>Like ‘url-for-routes’ but the returned function returns a map with the keys :action, the URL string; and :method, the HTTP verb as a lower-case string. Also, the :method-param is :_method by default, so HTTP verbs other than GET and POST will be converted to POST with the actual verb in the query string.</p>
</div></div><div class="src-link"><a href="https://github.com/pedestal/pedestal/blob/0.7.0-beta-3/route/src/io/pedestal/http/route.clj#L571">view source</a></div></div><div class="public anchor" id="var-method-param"><h3>method-param</h3><div class="usage"><code>(method-param)</code><code>(method-param query-param-or-param-path)</code></div><div class="doc"><div class="markdown"><p>Returns an interceptor that smuggles HTTP verbs through a value in the request. Must come <em>after</em> the interceptor that populates that value (e.g. query-params or body-params).</p>
<p>query-param-or-param-path may be one of two things:</p>
<ul>
<li>The parameter inside :query-params where the verb will reside.</li>
<li>A complete path to a value elsewhere in the request, such as <a href=":query-params :_method">:query-params :_method</a> or <a href=":body-params &quot;_method&quot;">:body-params “_method”</a></li>
</ul>
<p>The path <a href=":query-params :_method">:query-params :_method</a> is used by default.</p>
</div></div><div class="src-link"><a href="https://github.com/pedestal/pedestal/blob/0.7.0-beta-3/route/src/io/pedestal/http/route.clj#L547">view source</a></div></div><div class="public anchor" id="var-parse-param-map"><h3>parse-param-map</h3><div class="usage"><code>(parse-param-map m)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/pedestal/pedestal/blob/0.7.0-beta-3/route/src/io/pedestal/http/route.clj#L132">view source</a></div></div><div class="public anchor" id="var-parse-path-params"><h3>parse-path-params</h3><div class="usage"><code>(parse-path-params request)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/pedestal/pedestal/blob/0.7.0-beta-3/route/src/io/pedestal/http/route.clj#L135">view source</a></div></div><div class="public anchor" id="var-parse-query-params"><h3>parse-query-params</h3><div class="usage"><code>(parse-query-params request)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/pedestal/pedestal/blob/0.7.0-beta-3/route/src/io/pedestal/http/route.clj#L123">view source</a></div></div><div class="public anchor" id="var-parse-query-string"><h3>parse-query-string</h3><div class="usage"><code>(parse-query-string string &amp; options)</code></div><div class="doc"><div class="markdown"><p>Parses URL query string (not including the leading ‘?’) into1 a map. options are key-value pairs, valid options are:</p>
<p>:key-fn    Function to call on parameter keys (after URL decoding), returns key for the map, default converts to a keyword.</p>
<p>:value-fn  Function to call on the key (after passing through key-fn) and parameter value (after URL decoding), returns value for the map, default does nothing.</p>
</div></div><div class="src-link"><a href="https://github.com/pedestal/pedestal/blob/0.7.0-beta-3/route/src/io/pedestal/http/route.clj#L66">view source</a></div></div><div class="public anchor" id="var-path-params-decoder"><h3>path-params-decoder</h3><div class="usage"></div><div class="doc"><div class="markdown"><p>An Interceptor which URL-decodes path parameters. The path parameters are in the :request map as :path-parameters.</p>
<p>This will only operate once per interceptor chain execution, even if it appears multiple times; this prevents failures in existing applications that upgrade to Pedestal 0.6.0, as prior releases incorrectly failed to parse path parameters. Existing applications that upgrade may have this interceptor in some routes, which could yield runtime exceptions and request failures if the interceptor is executed twice.</p>
</div></div><div class="src-link"><a href="https://github.com/pedestal/pedestal/blob/0.7.0-beta-3/route/src/io/pedestal/http/route.clj#L522">view source</a></div></div><div class="public anchor" id="var-print-routes"><h3>print-routes</h3><div class="usage"><code>(print-routes expanded-routes)</code></div><div class="doc"><div class="markdown"><p>Prints a route table (from <a href="io.pedestal.http.route.html#var-expand-routes">expand-routes</a>) in an easier to read format.</p>
</div></div><div class="src-link"><a href="https://github.com/pedestal/pedestal/blob/0.7.0-beta-3/route/src/io/pedestal/http/route.clj#L592">view source</a></div></div><div class="public anchor" id="var-query-params"><h3>query-params</h3><div class="usage"></div><div class="doc"><div class="markdown"><p>An interceptor which parses query-string parameters from an HTTP request into a map. Keys in the map are query-string parameter names, as keywords, and values are strings. The map is assoc’d into the request at :query-params.</p>
</div></div><div class="src-link"><a href="https://github.com/pedestal/pedestal/blob/0.7.0-beta-3/route/src/io/pedestal/http/route.clj#L509">view source</a></div></div><div class="public anchor" id="var-router"><h3>router</h3><div class="usage"><code>(router routing-table)</code><code>(router routing-table router-type)</code></div><div class="doc"><div class="markdown"><p>Given the expanded routing table and, optionally, what kind of router to construct, creates and returns a router interceptor.</p>
<p>router-type may be a keyword identifying a known implementation (see <a href="io.pedestal.http.route.html#var-router-implementations">router-implementations</a>), or function that accepts a routing table, and returns a <a href="io.pedestal.http.route.router.html#var-Router">Router</a>.</p>
<p>The default router type is :map-tree, which is the fastest built-in router; however, if the expanded routes contain path parameters or wildcards, the result is equivalent to the slower :prefix-tree implementation.</p>
</div></div><div class="src-link"><a href="https://github.com/pedestal/pedestal/blob/0.7.0-beta-3/route/src/io/pedestal/http/route.clj#L477">view source</a></div></div><div class="public anchor" id="var-router-implementations"><h3>router-implementations</h3><div class="usage"></div><div class="doc"><div class="markdown"><p>Maps from the common router implementations (:map-tree, :prefix-tree, or :linear-search) to a router constructor function (which accepts expanded routes, and returns a Router instance).</p>
</div></div><div class="src-link"><a href="https://github.com/pedestal/pedestal/blob/0.7.0-beta-3/route/src/io/pedestal/http/route.clj#L470">view source</a></div></div><div class="public anchor" id="var-RouterSpecification"><h3>RouterSpecification</h3><h4 class="type">protocol</h4><div class="usage"></div><div class="doc"><div class="markdown"></div></div><div class="members"><h4>members</h4><div class="inner"><div class="public anchor" id="var-router-spec"><h3>router-spec</h3><div class="usage"><code>(router-spec routing-table router-ctor)</code></div><div class="doc"><div class="markdown"><p>Given a routing-table (usually, via <a href="io.pedestal.http.route.html#var-expand-routes">expand-routes</a> and a routing contructor functions, returns an interceptor which attempts to match each route against a :request in context. For the first route that matches, it will:</p>
<ul>
<li>enqueue the matched route’s interceptors</li>
<li>associate the route into the context as key :route</li>
<li>associate a map of :path-params into the :request</li>
</ul>
<p>If no route matches, returns the context with :route nil.</p>
</div></div></div></div></div><div class="src-link"><a href="https://github.com/pedestal/pedestal/blob/0.7.0-beta-3/route/src/io/pedestal/http/route.clj#L422">view source</a></div></div><div class="public anchor" id="var-routes-from"><h3>routes-from</h3><h4 class="type">macro</h4><h4 class="added">added in 0.7.0</h4><div class="usage"><code>(routes-from route-spec-expr)</code></div><div class="doc"><div class="markdown"><p>Wraps around an expression that provides the routing specification.</p>
<p>In production mode (the default) evaluates to the expression, unchanged.</p>
<p>In development mode (see <a href="io.pedestal.environment.html#var-dev-mode.3F">dev-mode?</a>), evaluates to a function that, when invoked, returns the expression passed through <a href="io.pedestal.http.route.html#var-expand-routes">expand-routes</a>; this is to support a REPL workflow. This works in combination with the extension of <a href="io.pedestal.http.route.html#var-RouterSpecification">RouterSpecification</a> onto Fn, which requires that the returned routing specification be expanded.</p>
<p>Further, when the expression is a non-local symbol, it is assumed to identify a Var holding the unexpanded routing specification; to avoid capturing the Var’s value, the expansion de-references the named Var before passing it to expand-routes.</p>
</div></div><div class="src-link"><a href="https://github.com/pedestal/pedestal/blob/0.7.0-beta-3/route/src/io/pedestal/http/route.clj#L610">view source</a></div></div><div class="public anchor" id="var-try-routing-for"><h3>try-routing-for</h3><div class="usage"><code>(try-routing-for routing-table router-type path verb)</code></div><div class="doc"><div class="markdown"><p>Used for testing; constructs a router from the routing-table and router-type and performs routing on the provided path and verb (e.g., :get or :post).</p>
<p>Returns the matched route (a map from the routing table), or nil if routing was unsuccessful.</p>
</div></div><div class="src-link"><a href="https://github.com/pedestal/pedestal/blob/0.7.0-beta-3/route/src/io/pedestal/http/route.clj#L597">view source</a></div></div><div class="public anchor" id="var-url-for"><h3>url-for</h3><div class="usage"><code>(url-for route-name &amp; options)</code></div><div class="doc"><div class="markdown"><p>Used by an invoked interceptor (including a handler function) to generate URLs based on a known route name (from the routing specification), and additional data.</p>
<p>This uses a hidden dynamic variable, so it can only be invoked from request processing threads, and only <em>after</em> the routing interceptor has routed the request.</p>
<p>The available options are as described in <a href="io.pedestal.http.route.html#var-url-for-routes">url-for-routes</a>.</p>
</div></div><div class="src-link"><a href="https://github.com/pedestal/pedestal/blob/0.7.0-beta-3/route/src/io/pedestal/http/route.clj#L360">view source</a></div></div><div class="public anchor" id="var-url-for-routes"><h3>url-for-routes</h3><div class="usage"><code>(url-for-routes routes &amp; default-options)</code></div><div class="doc"><div class="markdown"><p>Returns a function that generates URL routes (as strings) from the routes table. The returned function has the signature:</p>
<pre><code>    [route-name &amp; options]
</code></pre>
<p>Where <code>options</code> are key-value pairs:</p>
<table>
<thead>
<tr><th>Key           </th><th> Value           </th><th> Description</th></tr>
</thead>
<tbody>
<tr><td>:app-name     </td><td> String          </td><td> Application name specified for this route</td></tr>
<tr><td>:request      </td><td> Map             </td><td> The original request; it will be merged into the generated link</td></tr>
<tr><td>:params       </td><td> Map             </td><td> A map of all parameters; any params not used as path parameters will be added to the query string</td></tr>
<tr><td>:path-params  </td><td> Map             </td><td> A map of path parameters only</td></tr>
<tr><td>:strict-path-params? </td><td> Boolean  </td><td> When true will throw an exception if all path-params aren’t fulfilled for the URL</td></tr>
<tr><td>:query-params </td><td> Map             </td><td> A map of query-string parameters only</td></tr>
<tr><td>:method-param </td><td> Keyword         </td><td> Names the query-string parameter in which to place the HTTP method name (used when not :get or :post)</td></tr>
<tr><td>:context      </td><td> varied          </td><td> String, function that returns a string, or symbol that resolves to a function; specifies root context for the URL</td></tr>
<tr><td>:fragment     </td><td> String          </td><td> The fragment part of the URL</td></tr>
<tr><td>:absolute?    </td><td> Boolean         </td><td> True to force an absolute URL</td></tr>
<tr><td>:scheme       </td><td> :http or :https </td><td> Used to override the scheme portion of the URL</td></tr>
<tr><td>:host         </td><td> String          </td><td> Used to override the host portion of the URL</td></tr>
<tr><td>:port         </td><td> Integer         </td><td> Used to override the port in the URL</td></tr>
</tbody>
</table>
<p>In addition, you may supply default-options to the ‘url-for-routes’ function, which are merged with the options supplied to the returned function.</p>
</div></div><div class="src-link"><a href="https://github.com/pedestal/pedestal/blob/0.7.0-beta-3/route/src/io/pedestal/http/route.clj#L312">view source</a></div></div></div></body></html>