<!DOCTYPE html PUBLIC ""
    "">
<html><head><meta charset="UTF-8" /><title>io.pedestal.connector documentation</title><link rel="stylesheet" type="text/css" href="css/default.css" /><link rel="stylesheet" type="text/css" href="css/highlight.css" /><script type="text/javascript" src="js/highlight.min.js"></script><script type="text/javascript" src="js/jquery.min.js"></script><script type="text/javascript" src="js/page_effects.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html"><span class="project-title"><span class="project-name">io.pedestal libraries</span> <span class="project-version">0.8.0-beta-2</span></span></a></h1></div><div class="sidebar primary"><h3 class="no-link"><span class="inner">Project</span></h3><ul class="index-link"><li class="depth-1 "><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>io</span></div></div></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>pedestal</span></div></div></li><li class="depth-3 current"><a href="io.pedestal.connector.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>connector</span></div></a></li><li class="depth-4 branch"><a href="io.pedestal.connector.dev.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>dev</span></div></a></li><li class="depth-4 branch"><a href="io.pedestal.connector.servlet.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>servlet</span></div></a></li><li class="depth-4 branch"><a href="io.pedestal.connector.specs.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>specs</span></div></a></li><li class="depth-4"><a href="io.pedestal.connector.test.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>test</span></div></a></li><li class="depth-3 branch"><a href="io.pedestal.environment.html"><div class="inner"><span class="tree" style="top: -145px;"><span class="top" style="height: 154px;"></span><span class="bottom"></span></span><span>environment</span></div></a></li><li class="depth-3"><a href="io.pedestal.http.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>http</span></div></a></li><li class="depth-4 branch"><a href="io.pedestal.http.body-params.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>body-params</span></div></a></li><li class="depth-4 branch"><a href="io.pedestal.http.container.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>container</span></div></a></li><li class="depth-4 branch"><a href="io.pedestal.http.content-negotiation.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>content-negotiation</span></div></a></li><li class="depth-4 branch"><a href="io.pedestal.http.cors.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>cors</span></div></a></li><li class="depth-4 branch"><a href="io.pedestal.http.csrf.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>csrf</span></div></a></li><li class="depth-4"><a href="io.pedestal.http.http-kit.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>http-kit</span></div></a></li><li class="depth-5 branch"><a href="io.pedestal.http.http-kit.response.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>response</span></div></a></li><li class="depth-5"><a href="io.pedestal.http.http-kit.specs.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>specs</span></div></a></li><li class="depth-4"><div class="no-link"><div class="inner"><span class="tree" style="top: -83px;"><span class="top" style="height: 92px;"></span><span class="bottom"></span></span><span>impl</span></div></div></li><li class="depth-5"><a href="io.pedestal.http.impl.servlet-interceptor.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>servlet-interceptor</span></div></a></li><li class="depth-6"><a href="io.pedestal.http.impl.servlet-interceptor.specs.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>specs</span></div></a></li><li class="depth-4"><a href="io.pedestal.http.jetty.html"><div class="inner"><span class="tree" style="top: -83px;"><span class="top" style="height: 92px;"></span><span class="bottom"></span></span><span>jetty</span></div></a></li><li class="depth-5 branch"><a href="io.pedestal.http.jetty.container.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>container</span></div></a></li><li class="depth-5 branch"><a href="io.pedestal.http.jetty.specs.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>specs</span></div></a></li><li class="depth-5"><a href="io.pedestal.http.jetty.util.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>util</span></div></a></li><li class="depth-4 branch"><a href="io.pedestal.http.params.html"><div class="inner"><span class="tree" style="top: -114px;"><span class="top" style="height: 123px;"></span><span class="bottom"></span></span><span>params</span></div></a></li><li class="depth-4"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>request</span></div></div></li><li class="depth-5"><a href="io.pedestal.http.request.map.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>map</span></div></a></li><li class="depth-4 branch"><a href="io.pedestal.http.response.html"><div class="inner"><span class="tree" style="top: -52px;"><span class="top" style="height: 61px;"></span><span class="bottom"></span></span><span>response</span></div></a></li><li class="depth-4 branch"><a href="io.pedestal.http.ring-middlewares.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>ring-middlewares</span></div></a></li><li class="depth-4"><a href="io.pedestal.http.route.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>route</span></div></a></li><li class="depth-5"><a href="io.pedestal.http.route.definition.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>definition</span></div></a></li><li class="depth-6 branch"><a href="io.pedestal.http.route.definition.table.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>table</span></div></a></li><li class="depth-6 branch"><a href="io.pedestal.http.route.definition.terse.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>terse</span></div></a></li><li class="depth-6"><a href="io.pedestal.http.route.definition.verbose.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>verbose</span></div></a></li><li class="depth-5 branch"><a href="io.pedestal.http.route.linear-search.html"><div class="inner"><span class="tree" style="top: -114px;"><span class="top" style="height: 123px;"></span><span class="bottom"></span></span><span>linear-search</span></div></a></li><li class="depth-5 branch"><a href="io.pedestal.http.route.map-tree.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>map-tree</span></div></a></li><li class="depth-5 branch"><a href="io.pedestal.http.route.path.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>path</span></div></a></li><li class="depth-5 branch"><a href="io.pedestal.http.route.prefix-tree.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>prefix-tree</span></div></a></li><li class="depth-5 branch"><a href="io.pedestal.http.route.sawtooth.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>sawtooth</span></div></a></li><li class="depth-5 branch"><a href="io.pedestal.http.route.specs.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>specs</span></div></a></li><li class="depth-5"><a href="io.pedestal.http.route.types.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>types</span></div></a></li><li class="depth-4 branch"><a href="io.pedestal.http.secure-headers.html"><div class="inner"><span class="tree" style="top: -362px;"><span class="top" style="height: 371px;"></span><span class="bottom"></span></span><span>secure-headers</span></div></a></li><li class="depth-4 branch"><a href="io.pedestal.http.servlet.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>servlet</span></div></a></li><li class="depth-4 branch"><a href="io.pedestal.http.specs.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>specs</span></div></a></li><li class="depth-4 branch"><a href="io.pedestal.http.sse.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>sse</span></div></a></li><li class="depth-4"><a href="io.pedestal.http.tracing.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>tracing</span></div></a></li><li class="depth-3"><a href="io.pedestal.interceptor.html"><div class="inner"><span class="tree" style="top: -1168px;"><span class="top" style="height: 1177px;"></span><span class="bottom"></span></span><span>interceptor</span></div></a></li><li class="depth-4"><a href="io.pedestal.interceptor.chain.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>chain</span></div></a></li><li class="depth-5"><a href="io.pedestal.interceptor.chain.debug.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>debug</span></div></a></li><li class="depth-4 branch"><a href="io.pedestal.interceptor.error.html"><div class="inner"><span class="tree" style="top: -52px;"><span class="top" style="height: 61px;"></span><span class="bottom"></span></span><span>error</span></div></a></li><li class="depth-4"><a href="io.pedestal.interceptor.specs.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>specs</span></div></a></li><li class="depth-3 branch"><a href="io.pedestal.log.html"><div class="inner"><span class="tree" style="top: -145px;"><span class="top" style="height: 154px;"></span><span class="bottom"></span></span><span>log</span></div></a></li><li class="depth-3"><a href="io.pedestal.metrics.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>metrics</span></div></a></li><li class="depth-4 branch"><a href="io.pedestal.metrics.otel.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>otel</span></div></a></li><li class="depth-4"><a href="io.pedestal.metrics.spi.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>spi</span></div></a></li><li class="depth-3"><div class="no-link"><div class="inner"><span class="tree" style="top: -83px;"><span class="top" style="height: 92px;"></span><span class="bottom"></span></span><span>service</span></div></div></li><li class="depth-4 branch"><a href="io.pedestal.service.data.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>data</span></div></a></li><li class="depth-4 branch"><a href="io.pedestal.service.interceptors.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>interceptors</span></div></a></li><li class="depth-4 branch"><a href="io.pedestal.service.protocols.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>protocols</span></div></a></li><li class="depth-4 branch"><a href="io.pedestal.service.resources.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>resources</span></div></a></li><li class="depth-4"><a href="io.pedestal.service.websocket.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>websocket</span></div></a></li><li class="depth-3"><div class="no-link"><div class="inner"><span class="tree" style="top: -176px;"><span class="top" style="height: 185px;"></span><span class="bottom"></span></span><span>telemetry</span></div></div></li><li class="depth-4"><a href="io.pedestal.telemetry.otel-global-init.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>otel-global-init</span></div></a></li><li class="depth-3 branch"><a href="io.pedestal.test.html"><div class="inner"><span class="tree" style="top: -52px;"><span class="top" style="height: 61px;"></span><span class="bottom"></span></span><span>test</span></div></a></li><li class="depth-3"><a href="io.pedestal.tracing.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>tracing</span></div></a></li><li class="depth-4"><a href="io.pedestal.tracing.spi.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>spi</span></div></a></li><li class="depth-3"><a href="io.pedestal.websocket.html"><div class="inner"><span class="tree" style="top: -52px;"><span class="top" style="height: 61px;"></span><span class="bottom"></span></span><span>websocket</span></div></a></li><li class="depth-4"><a href="io.pedestal.websocket.specs.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>specs</span></div></a></li></ul></div><div class="sidebar secondary"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="io.pedestal.connector.html#var-default-connector-map"><div class="inner"><span>default-connector-map</span></div></a></li><li class="depth-1"><a href="io.pedestal.connector.html#var-optionally-with-dev-mode-interceptors"><div class="inner"><span>optionally-with-dev-mode-interceptors</span></div></a></li><li class="depth-1"><a href="io.pedestal.connector.html#var-start.21"><div class="inner"><span>start!</span></div></a></li><li class="depth-1"><a href="io.pedestal.connector.html#var-stop.21"><div class="inner"><span>stop!</span></div></a></li><li class="depth-1"><a href="io.pedestal.connector.html#var-with-default-interceptors"><div class="inner"><span>with-default-interceptors</span></div></a></li><li class="depth-1"><a href="io.pedestal.connector.html#var-with-interceptor"><div class="inner"><span>with-interceptor</span></div></a></li><li class="depth-1"><a href="io.pedestal.connector.html#var-with-interceptors"><div class="inner"><span>with-interceptors</span></div></a></li><li class="depth-1"><a href="io.pedestal.connector.html#var-with-routes"><div class="inner"><span>with-routes</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h1 class="anchor" id="top">io.pedestal.connector</h1><h4 class="added">added in 0.8.0</h4><div class="doc"><div class="markdown"><p>Replacement for io.pedestal.http that is not (directly) linked to the Jakarta Servlet API and is generally simpler to use.</p>
</div></div><div class="public anchor" id="var-default-connector-map"><h3>default-connector-map</h3><div class="usage"><code>(default-connector-map port)</code><code>(default-connector-map host port)</code></div><div class="doc"><div class="markdown"><p>Creates a default connector map for the given port and optional host.  host defaults to “localhost” which is appropriate for local testing (accessible only from the local host), but “0.0.0.0” (accessible from any TCP/IP connection) is a better option when deployed.</p>
<p>The :router key defaults to :sawtooth; this can also be one of :map-tree, :prefix-tree, or :linear-search, or it can be a custom function to create a router function.</p>
</div></div><div class="src-link"><a href="https://github.com/pedestal/pedestal/blob/0.8.0-beta-2/service/src/io/pedestal/connector.clj#L28">view source</a></div></div><div class="public anchor" id="var-optionally-with-dev-mode-interceptors"><h3>optionally-with-dev-mode-interceptors</h3><div class="usage"><code>(optionally-with-dev-mode-interceptors connector-map)</code></div><div class="doc"><div class="markdown"><p>Conditionally adds <a href="io.pedestal.connector.dev.html#var-dev-interceptors">dev-interceptors</a> only when development mode is enabled.</p>
</div></div><div class="src-link"><a href="https://github.com/pedestal/pedestal/blob/0.8.0-beta-2/service/src/io/pedestal/connector.clj#L59">view source</a></div></div><div class="public anchor" id="var-start.21"><h3>start!</h3><div class="usage"><code>(start! connector)</code></div><div class="doc"><div class="markdown"><p>A convienience function for starting the connector.</p>
<p>This may block the current thread until the connector is stopped.</p>
<p>Returns the connector.</p>
</div></div><div class="src-link"><a href="https://github.com/pedestal/pedestal/blob/0.8.0-beta-2/service/src/io/pedestal/connector.clj#L141">view source</a></div></div><div class="public anchor" id="var-stop.21"><h3>stop!</h3><div class="usage"><code>(stop! connector)</code></div><div class="doc"><div class="markdown"><p>A convienience function for stopping the connector.</p>
</div></div><div class="src-link"><a href="https://github.com/pedestal/pedestal/blob/0.8.0-beta-2/service/src/io/pedestal/connector.clj#L150">view source</a></div></div><div class="public anchor" id="var-with-default-interceptors"><h3>with-default-interceptors</h3><div class="usage"><code>(with-default-interceptors connector-map &amp; {:as options})</code></div><div class="doc"><div class="markdown"><p>Sets up a default set of interceptors for <em>early</em> development of an application.</p>
<p><strong>It is expected that an application under active development will not use this function, but will provide its own interceptor stack explicitly.</strong></p>
<p>These interceptors provide basic secure functionality with a limited amount of configurability. Many of the underlying interceptors can be configured for greater security.</p>
<p>A routing interceptor should be added after all other interceptors.</p>
<p>Interceptors (in order):</p>
<table>
<thead>
<tr><th>Role                       </th><th> Description                                   </th><th> Provided By</th></tr>
</thead>
<tbody>
<tr><td>Request tracing            </td><td> Make request observable via Open Telemetry    </td><td> <a href="io.pedestal.http.tracing.html#var-request-tracing-interceptor">request-tracing-interceptor</a></td></tr>
<tr><td>Request logging            </td><td> Log incoming request method and URI           </td><td> <a href="io.pedestal.service.interceptors.html#var-log-request">log-request</a></td></tr>
<tr><td>Allowed origins (optional) </td><td> Only allow requests from specified origins    </td><td> <a href="io.pedestal.http.cors.html#var-allow-origin">allow-origin</a></td></tr>
<tr><td>Not Found                  </td><td> Report lack of response as a status 404       </td><td> <a href="io.pedestal.service.interceptors.html#var-not-found">not-found</a></td></tr>
<tr><td>Session support (optional) </td><td> Persist data between requests                 </td><td> <a href="io.pedestal.http.ring-middlewares.html#var-session">session</a></td></tr>
<tr><td>Body params                </td><td> Parse JSON, EDN, etc. body into appropriate  parameters (:edn-body, :json-body, etc.) </td><td> <a href="io.pedestal.http.body-params.html#var-body-params">body-params</a></td></tr>
<tr><td>Default content type       </td><td> Set response content type from request file extension, if not otherwise set </td><td> <a href="io.pedestal.http.ring-middlewares.html#var-content-type">content-type</a></td></tr>
<tr><td>Query parameters           </td><td> Decode request :query-string to :query-params </td><td> <a href="io.pedestal.http.route.html#var-query-params">query-params</a></td></tr>
<tr><td>Secure headers             </td><td> Ensures a number of security-related headers  </td><td> <a href="io.pedestal.http.secure-headers.html#var-secure-headers">secure-headers</a></td></tr>
</tbody>
</table>
<p>Note that application code <em>should not</em> depend on the exact names of the interceptors, as those may be subject to change.</p>
<table>
<thead>
<tr><th>Option            </th><th> Notes</th></tr>
</thead>
<tbody>
<tr><td>:allowed-origins  </td><td> Passed to <a href="io.pedestal.http.cors.html#var-allow-origin">allow-origin</a></td></tr>
<tr><td>:session-options  </td><td> If non-nil, passed to <a href="io.pedestal.http.ring-middlewares.html#var-session">session</a></td></tr>
<tr><td>:extra-mime-types </td><td> Passed to <a href="io.pedestal.http.ring-middlewares.html#var-content-type">content-type</a></td></tr>
</tbody>
</table>
</div></div><div class="src-link"><a href="https://github.com/pedestal/pedestal/blob/0.8.0-beta-2/service/src/io/pedestal/connector.clj#L91">view source</a></div></div><div class="public anchor" id="var-with-interceptor"><h3>with-interceptor</h3><div class="usage"><code>(with-interceptor connector-map interceptor)</code></div><div class="doc"><div class="markdown"><p>Appends to the :interceptors in the conector map, or returns the connector-map unchanged if interceptor is nil.</p>
<p>interceptor must be an interceptor record, or convertable to an interceptor record.</p>
</div></div><div class="src-link"><a href="https://github.com/pedestal/pedestal/blob/0.8.0-beta-2/service/src/io/pedestal/connector.clj#L45">view source</a></div></div><div class="public anchor" id="var-with-interceptors"><h3>with-interceptors</h3><div class="usage"><code>(with-interceptors connector-map interceptors)</code></div><div class="doc"><div class="markdown"><p>Appends a sequence of interceptors using <a href="io.pedestal.connector.html#var-with-interceptor">with-interceptor</a>.</p>
</div></div><div class="src-link"><a href="https://github.com/pedestal/pedestal/blob/0.8.0-beta-2/service/src/io/pedestal/connector.clj#L54">view source</a></div></div><div class="public anchor" id="var-with-routes"><h3>with-routes</h3><h4 class="type">macro</h4><div class="usage"><code>(with-routes connector-map &amp; route-fragments)</code></div><div class="doc"><div class="markdown"><p>A macro for adding a routing interceptor (and an interceptor to decode path parameters) to the connector map. This is generally the last step in building the interceptor chain.</p>
<p>This is a wrapper around the <a href="io.pedestal.http.route.html#var-routes-from">routes-from</a> macro, which helps with live code updates when developing at the REPL.</p>
<p>The provided route-fragments must extend the <a href="io.pedestal.http.route.html#var-ExpandableRoutes">ExpandableRoutes</a> protocol; these will either be <a href="io.pedestal.http.route.types.html#var-RoutingFragment">RoutingFragment</a>s (from directly invoking a function such as <a href="io.pedestal.http.route.definition.table.html#var-table-routes">table-routes</a>) or a data structure (vector, map, or set) that can be implicitly converted to a RoutingFragment.</p>
<p>At least one route fragment is required.</p>
<p>Evalulates to the connector map with two added interceptors:</p>
<ul>
<li>A routing interceptor</li>
<li>A <a href="io.pedestal.http.route.html#var-path-params-decoder">path-params-decoder</a></li>
</ul>
</div></div><div class="src-link"><a href="https://github.com/pedestal/pedestal/blob/0.8.0-beta-2/service/src/io/pedestal/connector.clj#L65">view source</a></div></div></div></body></html>