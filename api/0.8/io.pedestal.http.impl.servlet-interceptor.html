<!DOCTYPE html PUBLIC ""
    "">
<html><head><meta charset="UTF-8" /><title>io.pedestal.http.impl.servlet-interceptor documentation</title><link rel="stylesheet" type="text/css" href="css/default.css" /><link rel="stylesheet" type="text/css" href="css/highlight.css" /><script type="text/javascript" src="js/highlight.min.js"></script><script type="text/javascript" src="js/jquery.min.js"></script><script type="text/javascript" src="js/page_effects.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html"><span class="project-title"><span class="project-name">io.pedestal libraries</span> <span class="project-version">0.8.0-SNAPSHOT</span></span></a></h1></div><div class="sidebar primary"><h3 class="no-link"><span class="inner">Project</span></h3><ul class="index-link"><li class="depth-1 "><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>io</span></div></div></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>pedestal</span></div></div></li><li class="depth-3"><a href="io.pedestal.connector.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>connector</span></div></a></li><li class="depth-4 branch"><a href="io.pedestal.connector.dev.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>dev</span></div></a></li><li class="depth-4"><a href="io.pedestal.connector.specs.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>specs</span></div></a></li><li class="depth-3 branch"><a href="io.pedestal.environment.html"><div class="inner"><span class="tree" style="top: -83px;"><span class="top" style="height: 92px;"></span><span class="bottom"></span></span><span>environment</span></div></a></li><li class="depth-3"><a href="io.pedestal.http.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>http</span></div></a></li><li class="depth-4 branch"><a href="io.pedestal.http.body-params.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>body-params</span></div></a></li><li class="depth-4 branch"><a href="io.pedestal.http.container.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>container</span></div></a></li><li class="depth-4 branch"><a href="io.pedestal.http.content-negotiation.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>content-negotiation</span></div></a></li><li class="depth-4 branch"><a href="io.pedestal.http.cors.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>cors</span></div></a></li><li class="depth-4 branch"><a href="io.pedestal.http.csrf.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>csrf</span></div></a></li><li class="depth-4"><a href="io.pedestal.http.http-kit.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>http-kit</span></div></a></li><li class="depth-5 branch"><a href="io.pedestal.http.http-kit.response.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>response</span></div></a></li><li class="depth-5"><a href="io.pedestal.http.http-kit.specs.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>specs</span></div></a></li><li class="depth-4"><div class="no-link"><div class="inner"><span class="tree" style="top: -83px;"><span class="top" style="height: 92px;"></span><span class="bottom"></span></span><span>impl</span></div></div></li><li class="depth-5 current"><a href="io.pedestal.http.impl.servlet-interceptor.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>servlet-interceptor</span></div></a></li><li class="depth-6"><a href="io.pedestal.http.impl.servlet-interceptor.specs.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>specs</span></div></a></li><li class="depth-4"><a href="io.pedestal.http.jetty.html"><div class="inner"><span class="tree" style="top: -83px;"><span class="top" style="height: 92px;"></span><span class="bottom"></span></span><span>jetty</span></div></a></li><li class="depth-5 branch"><a href="io.pedestal.http.jetty.container.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>container</span></div></a></li><li class="depth-5 branch"><a href="io.pedestal.http.jetty.specs.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>specs</span></div></a></li><li class="depth-5"><a href="io.pedestal.http.jetty.util.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>util</span></div></a></li><li class="depth-4 branch"><a href="io.pedestal.http.params.html"><div class="inner"><span class="tree" style="top: -114px;"><span class="top" style="height: 123px;"></span><span class="bottom"></span></span><span>params</span></div></a></li><li class="depth-4"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>request</span></div></div></li><li class="depth-5"><a href="io.pedestal.http.request.map.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>map</span></div></a></li><li class="depth-4 branch"><a href="io.pedestal.http.response.html"><div class="inner"><span class="tree" style="top: -52px;"><span class="top" style="height: 61px;"></span><span class="bottom"></span></span><span>response</span></div></a></li><li class="depth-4 branch"><a href="io.pedestal.http.ring-middlewares.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>ring-middlewares</span></div></a></li><li class="depth-4"><a href="io.pedestal.http.route.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>route</span></div></a></li><li class="depth-5"><a href="io.pedestal.http.route.definition.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>definition</span></div></a></li><li class="depth-6 branch"><a href="io.pedestal.http.route.definition.table.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>table</span></div></a></li><li class="depth-6 branch"><a href="io.pedestal.http.route.definition.terse.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>terse</span></div></a></li><li class="depth-6"><a href="io.pedestal.http.route.definition.verbose.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>verbose</span></div></a></li><li class="depth-5 branch"><a href="io.pedestal.http.route.linear-search.html"><div class="inner"><span class="tree" style="top: -114px;"><span class="top" style="height: 123px;"></span><span class="bottom"></span></span><span>linear-search</span></div></a></li><li class="depth-5 branch"><a href="io.pedestal.http.route.map-tree.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>map-tree</span></div></a></li><li class="depth-5 branch"><a href="io.pedestal.http.route.path.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>path</span></div></a></li><li class="depth-5 branch"><a href="io.pedestal.http.route.prefix-tree.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>prefix-tree</span></div></a></li><li class="depth-5 branch"><a href="io.pedestal.http.route.sawtooth.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>sawtooth</span></div></a></li><li class="depth-5 branch"><a href="io.pedestal.http.route.specs.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>specs</span></div></a></li><li class="depth-5"><a href="io.pedestal.http.route.types.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>types</span></div></a></li><li class="depth-4 branch"><a href="io.pedestal.http.secure-headers.html"><div class="inner"><span class="tree" style="top: -362px;"><span class="top" style="height: 371px;"></span><span class="bottom"></span></span><span>secure-headers</span></div></a></li><li class="depth-4 branch"><a href="io.pedestal.http.servlet.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>servlet</span></div></a></li><li class="depth-4 branch"><a href="io.pedestal.http.specs.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>specs</span></div></a></li><li class="depth-4 branch"><a href="io.pedestal.http.sse.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>sse</span></div></a></li><li class="depth-4"><a href="io.pedestal.http.tracing.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>tracing</span></div></a></li><li class="depth-3"><a href="io.pedestal.interceptor.html"><div class="inner"><span class="tree" style="top: -1168px;"><span class="top" style="height: 1177px;"></span><span class="bottom"></span></span><span>interceptor</span></div></a></li><li class="depth-4"><a href="io.pedestal.interceptor.chain.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>chain</span></div></a></li><li class="depth-5"><a href="io.pedestal.interceptor.chain.debug.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>debug</span></div></a></li><li class="depth-4 branch"><a href="io.pedestal.interceptor.error.html"><div class="inner"><span class="tree" style="top: -52px;"><span class="top" style="height: 61px;"></span><span class="bottom"></span></span><span>error</span></div></a></li><li class="depth-4"><a href="io.pedestal.interceptor.specs.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>specs</span></div></a></li><li class="depth-3 branch"><a href="io.pedestal.log.html"><div class="inner"><span class="tree" style="top: -145px;"><span class="top" style="height: 154px;"></span><span class="bottom"></span></span><span>log</span></div></a></li><li class="depth-3"><a href="io.pedestal.metrics.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>metrics</span></div></a></li><li class="depth-4 branch"><a href="io.pedestal.metrics.otel.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>otel</span></div></a></li><li class="depth-4"><a href="io.pedestal.metrics.spi.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>spi</span></div></a></li><li class="depth-3"><div class="no-link"><div class="inner"><span class="tree" style="top: -83px;"><span class="top" style="height: 92px;"></span><span class="bottom"></span></span><span>service</span></div></div></li><li class="depth-4 branch"><a href="io.pedestal.service.data.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>data</span></div></a></li><li class="depth-4 branch"><a href="io.pedestal.service.interceptors.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>interceptors</span></div></a></li><li class="depth-4 branch"><a href="io.pedestal.service.protocols.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>protocols</span></div></a></li><li class="depth-4 branch"><a href="io.pedestal.service.resources.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>resources</span></div></a></li><li class="depth-4 branch"><a href="io.pedestal.service.test.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>test</span></div></a></li><li class="depth-4"><a href="io.pedestal.service.websocket.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>websocket</span></div></a></li><li class="depth-3"><div class="no-link"><div class="inner"><span class="tree" style="top: -207px;"><span class="top" style="height: 216px;"></span><span class="bottom"></span></span><span>telemetry</span></div></div></li><li class="depth-4"><a href="io.pedestal.telemetry.otel-global-init.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>otel-global-init</span></div></a></li><li class="depth-3 branch"><a href="io.pedestal.test.html"><div class="inner"><span class="tree" style="top: -52px;"><span class="top" style="height: 61px;"></span><span class="bottom"></span></span><span>test</span></div></a></li><li class="depth-3"><a href="io.pedestal.tracing.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>tracing</span></div></a></li><li class="depth-4"><a href="io.pedestal.tracing.spi.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>spi</span></div></a></li><li class="depth-3"><a href="io.pedestal.websocket.html"><div class="inner"><span class="tree" style="top: -52px;"><span class="top" style="height: 61px;"></span><span class="bottom"></span></span><span>websocket</span></div></a></li><li class="depth-4"><a href="io.pedestal.websocket.specs.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>specs</span></div></a></li></ul></div><div class="sidebar secondary"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="io.pedestal.http.impl.servlet-interceptor.html#var-apply-default-content-type"><div class="inner"><span>apply-default-content-type</span></div></a></li><li class="depth-1"><a href="io.pedestal.http.impl.servlet-interceptor.html#var-default-exception-analyzer"><div class="inner"><span>default-exception-analyzer</span></div></a></li><li class="depth-1"><a href="io.pedestal.http.impl.servlet-interceptor.html#var-exception-debug"><div class="inner"><span>exception-debug</span></div></a></li><li class="depth-1"><a href="io.pedestal.http.impl.servlet-interceptor.html#var-http-interceptor-service-fn"><div class="inner"><span>http-interceptor-service-fn</span></div></a></li><li class="depth-1"><a href="io.pedestal.http.impl.servlet-interceptor.html#var-ring-response"><div class="inner"><span>ring-response</span></div></a></li><li class="depth-1"><a href="io.pedestal.http.impl.servlet-interceptor.html#var-set-response"><div class="inner"><span>set-response</span></div></a></li><li class="depth-1"><a href="io.pedestal.http.impl.servlet-interceptor.html#var-WriteableBody"><div class="inner"><span>WriteableBody</span></div></a></li><li class="depth-2 branch"><a href="io.pedestal.http.impl.servlet-interceptor.html#var-default-content-type"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>default-content-type</span></div></a></li><li class="depth-2"><a href="io.pedestal.http.impl.servlet-interceptor.html#var-write-body-to-stream"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>write-body-to-stream</span></div></a></li><li class="depth-1"><a href="io.pedestal.http.impl.servlet-interceptor.html#var-WriteableBodyAsync"><div class="inner"><span>WriteableBodyAsync</span></div></a></li><li class="depth-2"><a href="io.pedestal.http.impl.servlet-interceptor.html#var-write-body-async"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>write-body-async</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h1 class="anchor" id="top">io.pedestal.http.impl.servlet-interceptor</h1><div class="doc"><div class="markdown"><p>Interceptors for adapting the Java HTTP Servlet interfaces.</p>
</div></div><div class="public anchor" id="var-apply-default-content-type"><h3>apply-default-content-type</h3><div class="usage"></div><div class="doc"><div class="markdown"><p>An interceptor that will apply a default content type header, if none has been supplied, and a default can be identified from the response body.</p>
</div></div><div class="src-link"><a href="https://github.com/pedestal/pedestal/blob/0.8.0-SNAPSHOT/servlet/src/io/pedestal/http/impl/servlet_interceptor.clj#L332">view source</a></div></div><div class="public anchor" id="var-default-exception-analyzer"><h3>default-exception-analyzer</h3><h4 class="added">added in 0.7.0</h4><div class="usage"><code>(default-exception-analyzer _context exception)</code></div><div class="doc"><div class="markdown"><p>The default for the :exception-analyzer option, this function is passed the context and a thrown exception that bubbled up to the stylobate interceptor.</p>
<p>Primarily, this function determines if an exception should be logged or not; it can also log or otherwise report an exception itself, and then prevent the stylobate interceptor from reporting the exception, by returning nil.</p>
<p>If a non-nil value is returned, it must be an exception, which will be logged.</p>
<p>This implementation returns the exception, unless it represents a broken pipe (a common exception that occurs when, during a long response, the client terminates the socket connection).</p>
</div></div><div class="src-link"><a href="https://github.com/pedestal/pedestal/blob/0.8.0-SNAPSHOT/servlet/src/io/pedestal/http/impl/servlet_interceptor.clj#L267">view source</a></div></div><div class="public anchor" id="var-exception-debug"><h3>exception-debug</h3><h4 class="deprecated">deprecated in 0.8.0</h4><div class="usage"></div><div class="doc"><div class="markdown"><p>An interceptor which catches errors, renders them to readable text and sends them to the user. This interceptor is intended for development time assistance in debugging problems in pedestal services. Including it in interceptor paths on production systems may present a security risk by exposing call stacks of the application when exceptions are encountered.</p>
<p>DEPRECATED: Use io.pedestal.connector.dev/uncaught-exception instead.</p>
</div></div><div class="src-link"><a href="https://github.com/pedestal/pedestal/blob/0.8.0-SNAPSHOT/servlet/src/io/pedestal/http/impl/servlet_interceptor.clj#L347">view source</a></div></div><div class="public anchor" id="var-http-interceptor-service-fn"><h3>http-interceptor-service-fn</h3><div class="usage"><code>(http-interceptor-service-fn interceptors)</code><code>(http-interceptor-service-fn interceptors initial-context)</code><code>(http-interceptor-service-fn interceptors initial-context options)</code></div><div class="doc"><div class="markdown"><p>Returns a function which can be used as an implementation of the Servlet.service method. It executes the interceptors (which must be already converted into Interceptor records) on an initial context map containing :servlet, :servlet-config, :servlet-request, and :servlet-response. The <a href="null">stylobate</a> and <a href="io.pedestal.http.impl.servlet-interceptor.html#var-ring-response">ring-response</a> interceptors are prepended to the sequence of interceptors.</p>
<p>Options: :exception-analyzer - function that analyzes exceptions that propagate up to the stylobate interceptor, defaults to <a href="io.pedestal.http.impl.servlet-interceptor.html#var-default-exception-analyzer">default-exception-analyzer</a>.</p>
<p>This is normally called automatically from io.pedestal.http/service-fn.</p>
</div></div><div class="src-link"><a href="https://github.com/pedestal/pedestal/blob/0.8.0-SNAPSHOT/servlet/src/io/pedestal/http/impl/servlet_interceptor.clj#L394">view source</a></div></div><div class="public anchor" id="var-ring-response"><h3>ring-response</h3><div class="usage"></div><div class="doc"><div class="markdown"><p>An interceptor which transmits a Ring specified response map to an HTTP response.</p>
<p>If a later interceptor in this context throws an exception which is not caught, this interceptor will set the HTTP response status code to 500 with a generic error message. Also, if later interceptors fail to furnish the context with a :response map, this interceptor will set the HTTP response to a 500 error.</p>
</div></div><div class="src-link"><a href="https://github.com/pedestal/pedestal/blob/0.8.0-SNAPSHOT/servlet/src/io/pedestal/http/impl/servlet_interceptor.clj#L318">view source</a></div></div><div class="public anchor" id="var-set-response"><h3>set-response</h3><div class="usage"><code>(set-response servlet-resp resp-map)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/pedestal/pedestal/blob/0.8.0-SNAPSHOT/servlet/src/io/pedestal/http/impl/servlet_interceptor.clj#L174">view source</a></div></div><div class="public anchor" id="var-WriteableBody"><h3>WriteableBody</h3><h4 class="type">protocol</h4><div class="usage"></div><div class="doc"><div class="markdown"></div></div><div class="members"><h4>members</h4><div class="inner"><div class="public anchor" id="var-default-content-type"><h3>default-content-type</h3><div class="usage"><code>(default-content-type body)</code></div><div class="doc"><div class="markdown"><p>Get default HTTP content-type for <code>body</code>.</p>
</div></div></div><div class="public anchor" id="var-write-body-to-stream"><h3>write-body-to-stream</h3><div class="usage"><code>(write-body-to-stream body output-stream)</code></div><div class="doc"><div class="markdown"><p>Write <code>body</code> to the stream output-stream.</p>
</div></div></div></div></div><div class="src-link"><a href="https://github.com/pedestal/pedestal/blob/0.8.0-SNAPSHOT/servlet/src/io/pedestal/http/impl/servlet_interceptor.clj#L45">view source</a></div></div><div class="public anchor" id="var-WriteableBodyAsync"><h3>WriteableBodyAsync</h3><h4 class="type">protocol</h4><div class="usage"></div><div class="doc"><div class="markdown"></div></div><div class="members"><h4>members</h4><div class="inner"><div class="public anchor" id="var-write-body-async"><h3>write-body-async</h3><div class="usage"><code>(write-body-async body servlet-response resume-chan context)</code></div><div class="doc"><div class="markdown"></div></div></div></div></div><div class="src-link"><a href="https://github.com/pedestal/pedestal/blob/0.8.0-SNAPSHOT/servlet/src/io/pedestal/http/impl/servlet_interceptor.clj#L120">view source</a></div></div></div></body></html>